(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{2207:function(module,exports,__webpack_require__){eval('var map = {\n\t"./af": 1995,\n\t"./af.js": 1995,\n\t"./ar": 1996,\n\t"./ar-dz": 1997,\n\t"./ar-dz.js": 1997,\n\t"./ar-kw": 1998,\n\t"./ar-kw.js": 1998,\n\t"./ar-ly": 1999,\n\t"./ar-ly.js": 1999,\n\t"./ar-ma": 2000,\n\t"./ar-ma.js": 2000,\n\t"./ar-sa": 2001,\n\t"./ar-sa.js": 2001,\n\t"./ar-tn": 2002,\n\t"./ar-tn.js": 2002,\n\t"./ar.js": 1996,\n\t"./az": 2003,\n\t"./az.js": 2003,\n\t"./be": 2004,\n\t"./be.js": 2004,\n\t"./bg": 2005,\n\t"./bg.js": 2005,\n\t"./bm": 2006,\n\t"./bm.js": 2006,\n\t"./bn": 2007,\n\t"./bn-bd": 2008,\n\t"./bn-bd.js": 2008,\n\t"./bn.js": 2007,\n\t"./bo": 2009,\n\t"./bo.js": 2009,\n\t"./br": 2010,\n\t"./br.js": 2010,\n\t"./bs": 2011,\n\t"./bs.js": 2011,\n\t"./ca": 2012,\n\t"./ca.js": 2012,\n\t"./cs": 2013,\n\t"./cs.js": 2013,\n\t"./cv": 2014,\n\t"./cv.js": 2014,\n\t"./cy": 2015,\n\t"./cy.js": 2015,\n\t"./da": 2016,\n\t"./da.js": 2016,\n\t"./de": 2017,\n\t"./de-at": 2018,\n\t"./de-at.js": 2018,\n\t"./de-ch": 2019,\n\t"./de-ch.js": 2019,\n\t"./de.js": 2017,\n\t"./dv": 2020,\n\t"./dv.js": 2020,\n\t"./el": 2021,\n\t"./el.js": 2021,\n\t"./en-au": 2022,\n\t"./en-au.js": 2022,\n\t"./en-ca": 2023,\n\t"./en-ca.js": 2023,\n\t"./en-gb": 2024,\n\t"./en-gb.js": 2024,\n\t"./en-ie": 2025,\n\t"./en-ie.js": 2025,\n\t"./en-il": 2026,\n\t"./en-il.js": 2026,\n\t"./en-in": 2027,\n\t"./en-in.js": 2027,\n\t"./en-nz": 2028,\n\t"./en-nz.js": 2028,\n\t"./en-sg": 2029,\n\t"./en-sg.js": 2029,\n\t"./eo": 2030,\n\t"./eo.js": 2030,\n\t"./es": 2031,\n\t"./es-do": 2032,\n\t"./es-do.js": 2032,\n\t"./es-mx": 2033,\n\t"./es-mx.js": 2033,\n\t"./es-us": 2034,\n\t"./es-us.js": 2034,\n\t"./es.js": 2031,\n\t"./et": 2035,\n\t"./et.js": 2035,\n\t"./eu": 2036,\n\t"./eu.js": 2036,\n\t"./fa": 2037,\n\t"./fa.js": 2037,\n\t"./fi": 2038,\n\t"./fi.js": 2038,\n\t"./fil": 2039,\n\t"./fil.js": 2039,\n\t"./fo": 2040,\n\t"./fo.js": 2040,\n\t"./fr": 2041,\n\t"./fr-ca": 2042,\n\t"./fr-ca.js": 2042,\n\t"./fr-ch": 2043,\n\t"./fr-ch.js": 2043,\n\t"./fr.js": 2041,\n\t"./fy": 2044,\n\t"./fy.js": 2044,\n\t"./ga": 2045,\n\t"./ga.js": 2045,\n\t"./gd": 2046,\n\t"./gd.js": 2046,\n\t"./gl": 2047,\n\t"./gl.js": 2047,\n\t"./gom-deva": 2048,\n\t"./gom-deva.js": 2048,\n\t"./gom-latn": 2049,\n\t"./gom-latn.js": 2049,\n\t"./gu": 2050,\n\t"./gu.js": 2050,\n\t"./he": 2051,\n\t"./he.js": 2051,\n\t"./hi": 2052,\n\t"./hi.js": 2052,\n\t"./hr": 2053,\n\t"./hr.js": 2053,\n\t"./hu": 2054,\n\t"./hu.js": 2054,\n\t"./hy-am": 2055,\n\t"./hy-am.js": 2055,\n\t"./id": 2056,\n\t"./id.js": 2056,\n\t"./is": 2057,\n\t"./is.js": 2057,\n\t"./it": 2058,\n\t"./it-ch": 2059,\n\t"./it-ch.js": 2059,\n\t"./it.js": 2058,\n\t"./ja": 2060,\n\t"./ja.js": 2060,\n\t"./jv": 2061,\n\t"./jv.js": 2061,\n\t"./ka": 2062,\n\t"./ka.js": 2062,\n\t"./kk": 2063,\n\t"./kk.js": 2063,\n\t"./km": 2064,\n\t"./km.js": 2064,\n\t"./kn": 2065,\n\t"./kn.js": 2065,\n\t"./ko": 2066,\n\t"./ko.js": 2066,\n\t"./ku": 2067,\n\t"./ku.js": 2067,\n\t"./ky": 2068,\n\t"./ky.js": 2068,\n\t"./lb": 2069,\n\t"./lb.js": 2069,\n\t"./lo": 2070,\n\t"./lo.js": 2070,\n\t"./lt": 2071,\n\t"./lt.js": 2071,\n\t"./lv": 2072,\n\t"./lv.js": 2072,\n\t"./me": 2073,\n\t"./me.js": 2073,\n\t"./mi": 2074,\n\t"./mi.js": 2074,\n\t"./mk": 2075,\n\t"./mk.js": 2075,\n\t"./ml": 2076,\n\t"./ml.js": 2076,\n\t"./mn": 2077,\n\t"./mn.js": 2077,\n\t"./mr": 2078,\n\t"./mr.js": 2078,\n\t"./ms": 2079,\n\t"./ms-my": 2080,\n\t"./ms-my.js": 2080,\n\t"./ms.js": 2079,\n\t"./mt": 2081,\n\t"./mt.js": 2081,\n\t"./my": 2082,\n\t"./my.js": 2082,\n\t"./nb": 2083,\n\t"./nb.js": 2083,\n\t"./ne": 2084,\n\t"./ne.js": 2084,\n\t"./nl": 2085,\n\t"./nl-be": 2086,\n\t"./nl-be.js": 2086,\n\t"./nl.js": 2085,\n\t"./nn": 2087,\n\t"./nn.js": 2087,\n\t"./oc-lnc": 2088,\n\t"./oc-lnc.js": 2088,\n\t"./pa-in": 2089,\n\t"./pa-in.js": 2089,\n\t"./pl": 2090,\n\t"./pl.js": 2090,\n\t"./pt": 2091,\n\t"./pt-br": 2092,\n\t"./pt-br.js": 2092,\n\t"./pt.js": 2091,\n\t"./ro": 2093,\n\t"./ro.js": 2093,\n\t"./ru": 2094,\n\t"./ru.js": 2094,\n\t"./sd": 2095,\n\t"./sd.js": 2095,\n\t"./se": 2096,\n\t"./se.js": 2096,\n\t"./si": 2097,\n\t"./si.js": 2097,\n\t"./sk": 2098,\n\t"./sk.js": 2098,\n\t"./sl": 2099,\n\t"./sl.js": 2099,\n\t"./sq": 2100,\n\t"./sq.js": 2100,\n\t"./sr": 2101,\n\t"./sr-cyrl": 2102,\n\t"./sr-cyrl.js": 2102,\n\t"./sr.js": 2101,\n\t"./ss": 2103,\n\t"./ss.js": 2103,\n\t"./sv": 2104,\n\t"./sv.js": 2104,\n\t"./sw": 2105,\n\t"./sw.js": 2105,\n\t"./ta": 2106,\n\t"./ta.js": 2106,\n\t"./te": 2107,\n\t"./te.js": 2107,\n\t"./tet": 2108,\n\t"./tet.js": 2108,\n\t"./tg": 2109,\n\t"./tg.js": 2109,\n\t"./th": 2110,\n\t"./th.js": 2110,\n\t"./tk": 2111,\n\t"./tk.js": 2111,\n\t"./tl-ph": 2112,\n\t"./tl-ph.js": 2112,\n\t"./tlh": 2113,\n\t"./tlh.js": 2113,\n\t"./tr": 2114,\n\t"./tr.js": 2114,\n\t"./tzl": 2115,\n\t"./tzl.js": 2115,\n\t"./tzm": 2116,\n\t"./tzm-latn": 2117,\n\t"./tzm-latn.js": 2117,\n\t"./tzm.js": 2116,\n\t"./ug-cn": 2118,\n\t"./ug-cn.js": 2118,\n\t"./uk": 2119,\n\t"./uk.js": 2119,\n\t"./ur": 2120,\n\t"./ur.js": 2120,\n\t"./uz": 2121,\n\t"./uz-latn": 2122,\n\t"./uz-latn.js": 2122,\n\t"./uz.js": 2121,\n\t"./vi": 2123,\n\t"./vi.js": 2123,\n\t"./x-pseudo": 2124,\n\t"./x-pseudo.js": 2124,\n\t"./yo": 2125,\n\t"./yo.js": 2125,\n\t"./zh-cn": 2126,\n\t"./zh-cn.js": 2126,\n\t"./zh-hk": 2127,\n\t"./zh-hk.js": 2127,\n\t"./zh-mo": 2128,\n\t"./zh-mo.js": 2128,\n\t"./zh-tw": 2129,\n\t"./zh-tw.js": 2129\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error("Cannot find module \'" + req + "\'");\n\t\te.code = \'MODULE_NOT_FOUND\';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2207;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIwNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUgc3luYyBeXFwuXFwvLiokPzUxZTQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIG1hcCA9IHtcblx0XCIuL2FmXCI6IDE5OTUsXG5cdFwiLi9hZi5qc1wiOiAxOTk1LFxuXHRcIi4vYXJcIjogMTk5Nixcblx0XCIuL2FyLWR6XCI6IDE5OTcsXG5cdFwiLi9hci1kei5qc1wiOiAxOTk3LFxuXHRcIi4vYXIta3dcIjogMTk5OCxcblx0XCIuL2FyLWt3LmpzXCI6IDE5OTgsXG5cdFwiLi9hci1seVwiOiAxOTk5LFxuXHRcIi4vYXItbHkuanNcIjogMTk5OSxcblx0XCIuL2FyLW1hXCI6IDIwMDAsXG5cdFwiLi9hci1tYS5qc1wiOiAyMDAwLFxuXHRcIi4vYXItc2FcIjogMjAwMSxcblx0XCIuL2FyLXNhLmpzXCI6IDIwMDEsXG5cdFwiLi9hci10blwiOiAyMDAyLFxuXHRcIi4vYXItdG4uanNcIjogMjAwMixcblx0XCIuL2FyLmpzXCI6IDE5OTYsXG5cdFwiLi9helwiOiAyMDAzLFxuXHRcIi4vYXouanNcIjogMjAwMyxcblx0XCIuL2JlXCI6IDIwMDQsXG5cdFwiLi9iZS5qc1wiOiAyMDA0LFxuXHRcIi4vYmdcIjogMjAwNSxcblx0XCIuL2JnLmpzXCI6IDIwMDUsXG5cdFwiLi9ibVwiOiAyMDA2LFxuXHRcIi4vYm0uanNcIjogMjAwNixcblx0XCIuL2JuXCI6IDIwMDcsXG5cdFwiLi9ibi1iZFwiOiAyMDA4LFxuXHRcIi4vYm4tYmQuanNcIjogMjAwOCxcblx0XCIuL2JuLmpzXCI6IDIwMDcsXG5cdFwiLi9ib1wiOiAyMDA5LFxuXHRcIi4vYm8uanNcIjogMjAwOSxcblx0XCIuL2JyXCI6IDIwMTAsXG5cdFwiLi9ici5qc1wiOiAyMDEwLFxuXHRcIi4vYnNcIjogMjAxMSxcblx0XCIuL2JzLmpzXCI6IDIwMTEsXG5cdFwiLi9jYVwiOiAyMDEyLFxuXHRcIi4vY2EuanNcIjogMjAxMixcblx0XCIuL2NzXCI6IDIwMTMsXG5cdFwiLi9jcy5qc1wiOiAyMDEzLFxuXHRcIi4vY3ZcIjogMjAxNCxcblx0XCIuL2N2LmpzXCI6IDIwMTQsXG5cdFwiLi9jeVwiOiAyMDE1LFxuXHRcIi4vY3kuanNcIjogMjAxNSxcblx0XCIuL2RhXCI6IDIwMTYsXG5cdFwiLi9kYS5qc1wiOiAyMDE2LFxuXHRcIi4vZGVcIjogMjAxNyxcblx0XCIuL2RlLWF0XCI6IDIwMTgsXG5cdFwiLi9kZS1hdC5qc1wiOiAyMDE4LFxuXHRcIi4vZGUtY2hcIjogMjAxOSxcblx0XCIuL2RlLWNoLmpzXCI6IDIwMTksXG5cdFwiLi9kZS5qc1wiOiAyMDE3LFxuXHRcIi4vZHZcIjogMjAyMCxcblx0XCIuL2R2LmpzXCI6IDIwMjAsXG5cdFwiLi9lbFwiOiAyMDIxLFxuXHRcIi4vZWwuanNcIjogMjAyMSxcblx0XCIuL2VuLWF1XCI6IDIwMjIsXG5cdFwiLi9lbi1hdS5qc1wiOiAyMDIyLFxuXHRcIi4vZW4tY2FcIjogMjAyMyxcblx0XCIuL2VuLWNhLmpzXCI6IDIwMjMsXG5cdFwiLi9lbi1nYlwiOiAyMDI0LFxuXHRcIi4vZW4tZ2IuanNcIjogMjAyNCxcblx0XCIuL2VuLWllXCI6IDIwMjUsXG5cdFwiLi9lbi1pZS5qc1wiOiAyMDI1LFxuXHRcIi4vZW4taWxcIjogMjAyNixcblx0XCIuL2VuLWlsLmpzXCI6IDIwMjYsXG5cdFwiLi9lbi1pblwiOiAyMDI3LFxuXHRcIi4vZW4taW4uanNcIjogMjAyNyxcblx0XCIuL2VuLW56XCI6IDIwMjgsXG5cdFwiLi9lbi1uei5qc1wiOiAyMDI4LFxuXHRcIi4vZW4tc2dcIjogMjAyOSxcblx0XCIuL2VuLXNnLmpzXCI6IDIwMjksXG5cdFwiLi9lb1wiOiAyMDMwLFxuXHRcIi4vZW8uanNcIjogMjAzMCxcblx0XCIuL2VzXCI6IDIwMzEsXG5cdFwiLi9lcy1kb1wiOiAyMDMyLFxuXHRcIi4vZXMtZG8uanNcIjogMjAzMixcblx0XCIuL2VzLW14XCI6IDIwMzMsXG5cdFwiLi9lcy1teC5qc1wiOiAyMDMzLFxuXHRcIi4vZXMtdXNcIjogMjAzNCxcblx0XCIuL2VzLXVzLmpzXCI6IDIwMzQsXG5cdFwiLi9lcy5qc1wiOiAyMDMxLFxuXHRcIi4vZXRcIjogMjAzNSxcblx0XCIuL2V0LmpzXCI6IDIwMzUsXG5cdFwiLi9ldVwiOiAyMDM2LFxuXHRcIi4vZXUuanNcIjogMjAzNixcblx0XCIuL2ZhXCI6IDIwMzcsXG5cdFwiLi9mYS5qc1wiOiAyMDM3LFxuXHRcIi4vZmlcIjogMjAzOCxcblx0XCIuL2ZpLmpzXCI6IDIwMzgsXG5cdFwiLi9maWxcIjogMjAzOSxcblx0XCIuL2ZpbC5qc1wiOiAyMDM5LFxuXHRcIi4vZm9cIjogMjA0MCxcblx0XCIuL2ZvLmpzXCI6IDIwNDAsXG5cdFwiLi9mclwiOiAyMDQxLFxuXHRcIi4vZnItY2FcIjogMjA0Mixcblx0XCIuL2ZyLWNhLmpzXCI6IDIwNDIsXG5cdFwiLi9mci1jaFwiOiAyMDQzLFxuXHRcIi4vZnItY2guanNcIjogMjA0Myxcblx0XCIuL2ZyLmpzXCI6IDIwNDEsXG5cdFwiLi9meVwiOiAyMDQ0LFxuXHRcIi4vZnkuanNcIjogMjA0NCxcblx0XCIuL2dhXCI6IDIwNDUsXG5cdFwiLi9nYS5qc1wiOiAyMDQ1LFxuXHRcIi4vZ2RcIjogMjA0Nixcblx0XCIuL2dkLmpzXCI6IDIwNDYsXG5cdFwiLi9nbFwiOiAyMDQ3LFxuXHRcIi4vZ2wuanNcIjogMjA0Nyxcblx0XCIuL2dvbS1kZXZhXCI6IDIwNDgsXG5cdFwiLi9nb20tZGV2YS5qc1wiOiAyMDQ4LFxuXHRcIi4vZ29tLWxhdG5cIjogMjA0OSxcblx0XCIuL2dvbS1sYXRuLmpzXCI6IDIwNDksXG5cdFwiLi9ndVwiOiAyMDUwLFxuXHRcIi4vZ3UuanNcIjogMjA1MCxcblx0XCIuL2hlXCI6IDIwNTEsXG5cdFwiLi9oZS5qc1wiOiAyMDUxLFxuXHRcIi4vaGlcIjogMjA1Mixcblx0XCIuL2hpLmpzXCI6IDIwNTIsXG5cdFwiLi9oclwiOiAyMDUzLFxuXHRcIi4vaHIuanNcIjogMjA1Myxcblx0XCIuL2h1XCI6IDIwNTQsXG5cdFwiLi9odS5qc1wiOiAyMDU0LFxuXHRcIi4vaHktYW1cIjogMjA1NSxcblx0XCIuL2h5LWFtLmpzXCI6IDIwNTUsXG5cdFwiLi9pZFwiOiAyMDU2LFxuXHRcIi4vaWQuanNcIjogMjA1Nixcblx0XCIuL2lzXCI6IDIwNTcsXG5cdFwiLi9pcy5qc1wiOiAyMDU3LFxuXHRcIi4vaXRcIjogMjA1OCxcblx0XCIuL2l0LWNoXCI6IDIwNTksXG5cdFwiLi9pdC1jaC5qc1wiOiAyMDU5LFxuXHRcIi4vaXQuanNcIjogMjA1OCxcblx0XCIuL2phXCI6IDIwNjAsXG5cdFwiLi9qYS5qc1wiOiAyMDYwLFxuXHRcIi4vanZcIjogMjA2MSxcblx0XCIuL2p2LmpzXCI6IDIwNjEsXG5cdFwiLi9rYVwiOiAyMDYyLFxuXHRcIi4va2EuanNcIjogMjA2Mixcblx0XCIuL2trXCI6IDIwNjMsXG5cdFwiLi9ray5qc1wiOiAyMDYzLFxuXHRcIi4va21cIjogMjA2NCxcblx0XCIuL2ttLmpzXCI6IDIwNjQsXG5cdFwiLi9rblwiOiAyMDY1LFxuXHRcIi4va24uanNcIjogMjA2NSxcblx0XCIuL2tvXCI6IDIwNjYsXG5cdFwiLi9rby5qc1wiOiAyMDY2LFxuXHRcIi4va3VcIjogMjA2Nyxcblx0XCIuL2t1LmpzXCI6IDIwNjcsXG5cdFwiLi9reVwiOiAyMDY4LFxuXHRcIi4va3kuanNcIjogMjA2OCxcblx0XCIuL2xiXCI6IDIwNjksXG5cdFwiLi9sYi5qc1wiOiAyMDY5LFxuXHRcIi4vbG9cIjogMjA3MCxcblx0XCIuL2xvLmpzXCI6IDIwNzAsXG5cdFwiLi9sdFwiOiAyMDcxLFxuXHRcIi4vbHQuanNcIjogMjA3MSxcblx0XCIuL2x2XCI6IDIwNzIsXG5cdFwiLi9sdi5qc1wiOiAyMDcyLFxuXHRcIi4vbWVcIjogMjA3Myxcblx0XCIuL21lLmpzXCI6IDIwNzMsXG5cdFwiLi9taVwiOiAyMDc0LFxuXHRcIi4vbWkuanNcIjogMjA3NCxcblx0XCIuL21rXCI6IDIwNzUsXG5cdFwiLi9tay5qc1wiOiAyMDc1LFxuXHRcIi4vbWxcIjogMjA3Nixcblx0XCIuL21sLmpzXCI6IDIwNzYsXG5cdFwiLi9tblwiOiAyMDc3LFxuXHRcIi4vbW4uanNcIjogMjA3Nyxcblx0XCIuL21yXCI6IDIwNzgsXG5cdFwiLi9tci5qc1wiOiAyMDc4LFxuXHRcIi4vbXNcIjogMjA3OSxcblx0XCIuL21zLW15XCI6IDIwODAsXG5cdFwiLi9tcy1teS5qc1wiOiAyMDgwLFxuXHRcIi4vbXMuanNcIjogMjA3OSxcblx0XCIuL210XCI6IDIwODEsXG5cdFwiLi9tdC5qc1wiOiAyMDgxLFxuXHRcIi4vbXlcIjogMjA4Mixcblx0XCIuL215LmpzXCI6IDIwODIsXG5cdFwiLi9uYlwiOiAyMDgzLFxuXHRcIi4vbmIuanNcIjogMjA4Myxcblx0XCIuL25lXCI6IDIwODQsXG5cdFwiLi9uZS5qc1wiOiAyMDg0LFxuXHRcIi4vbmxcIjogMjA4NSxcblx0XCIuL25sLWJlXCI6IDIwODYsXG5cdFwiLi9ubC1iZS5qc1wiOiAyMDg2LFxuXHRcIi4vbmwuanNcIjogMjA4NSxcblx0XCIuL25uXCI6IDIwODcsXG5cdFwiLi9ubi5qc1wiOiAyMDg3LFxuXHRcIi4vb2MtbG5jXCI6IDIwODgsXG5cdFwiLi9vYy1sbmMuanNcIjogMjA4OCxcblx0XCIuL3BhLWluXCI6IDIwODksXG5cdFwiLi9wYS1pbi5qc1wiOiAyMDg5LFxuXHRcIi4vcGxcIjogMjA5MCxcblx0XCIuL3BsLmpzXCI6IDIwOTAsXG5cdFwiLi9wdFwiOiAyMDkxLFxuXHRcIi4vcHQtYnJcIjogMjA5Mixcblx0XCIuL3B0LWJyLmpzXCI6IDIwOTIsXG5cdFwiLi9wdC5qc1wiOiAyMDkxLFxuXHRcIi4vcm9cIjogMjA5Myxcblx0XCIuL3JvLmpzXCI6IDIwOTMsXG5cdFwiLi9ydVwiOiAyMDk0LFxuXHRcIi4vcnUuanNcIjogMjA5NCxcblx0XCIuL3NkXCI6IDIwOTUsXG5cdFwiLi9zZC5qc1wiOiAyMDk1LFxuXHRcIi4vc2VcIjogMjA5Nixcblx0XCIuL3NlLmpzXCI6IDIwOTYsXG5cdFwiLi9zaVwiOiAyMDk3LFxuXHRcIi4vc2kuanNcIjogMjA5Nyxcblx0XCIuL3NrXCI6IDIwOTgsXG5cdFwiLi9zay5qc1wiOiAyMDk4LFxuXHRcIi4vc2xcIjogMjA5OSxcblx0XCIuL3NsLmpzXCI6IDIwOTksXG5cdFwiLi9zcVwiOiAyMTAwLFxuXHRcIi4vc3EuanNcIjogMjEwMCxcblx0XCIuL3NyXCI6IDIxMDEsXG5cdFwiLi9zci1jeXJsXCI6IDIxMDIsXG5cdFwiLi9zci1jeXJsLmpzXCI6IDIxMDIsXG5cdFwiLi9zci5qc1wiOiAyMTAxLFxuXHRcIi4vc3NcIjogMjEwMyxcblx0XCIuL3NzLmpzXCI6IDIxMDMsXG5cdFwiLi9zdlwiOiAyMTA0LFxuXHRcIi4vc3YuanNcIjogMjEwNCxcblx0XCIuL3N3XCI6IDIxMDUsXG5cdFwiLi9zdy5qc1wiOiAyMTA1LFxuXHRcIi4vdGFcIjogMjEwNixcblx0XCIuL3RhLmpzXCI6IDIxMDYsXG5cdFwiLi90ZVwiOiAyMTA3LFxuXHRcIi4vdGUuanNcIjogMjEwNyxcblx0XCIuL3RldFwiOiAyMTA4LFxuXHRcIi4vdGV0LmpzXCI6IDIxMDgsXG5cdFwiLi90Z1wiOiAyMTA5LFxuXHRcIi4vdGcuanNcIjogMjEwOSxcblx0XCIuL3RoXCI6IDIxMTAsXG5cdFwiLi90aC5qc1wiOiAyMTEwLFxuXHRcIi4vdGtcIjogMjExMSxcblx0XCIuL3RrLmpzXCI6IDIxMTEsXG5cdFwiLi90bC1waFwiOiAyMTEyLFxuXHRcIi4vdGwtcGguanNcIjogMjExMixcblx0XCIuL3RsaFwiOiAyMTEzLFxuXHRcIi4vdGxoLmpzXCI6IDIxMTMsXG5cdFwiLi90clwiOiAyMTE0LFxuXHRcIi4vdHIuanNcIjogMjExNCxcblx0XCIuL3R6bFwiOiAyMTE1LFxuXHRcIi4vdHpsLmpzXCI6IDIxMTUsXG5cdFwiLi90em1cIjogMjExNixcblx0XCIuL3R6bS1sYXRuXCI6IDIxMTcsXG5cdFwiLi90em0tbGF0bi5qc1wiOiAyMTE3LFxuXHRcIi4vdHptLmpzXCI6IDIxMTYsXG5cdFwiLi91Zy1jblwiOiAyMTE4LFxuXHRcIi4vdWctY24uanNcIjogMjExOCxcblx0XCIuL3VrXCI6IDIxMTksXG5cdFwiLi91ay5qc1wiOiAyMTE5LFxuXHRcIi4vdXJcIjogMjEyMCxcblx0XCIuL3VyLmpzXCI6IDIxMjAsXG5cdFwiLi91elwiOiAyMTIxLFxuXHRcIi4vdXotbGF0blwiOiAyMTIyLFxuXHRcIi4vdXotbGF0bi5qc1wiOiAyMTIyLFxuXHRcIi4vdXouanNcIjogMjEyMSxcblx0XCIuL3ZpXCI6IDIxMjMsXG5cdFwiLi92aS5qc1wiOiAyMTIzLFxuXHRcIi4veC1wc2V1ZG9cIjogMjEyNCxcblx0XCIuL3gtcHNldWRvLmpzXCI6IDIxMjQsXG5cdFwiLi95b1wiOiAyMTI1LFxuXHRcIi4veW8uanNcIjogMjEyNSxcblx0XCIuL3poLWNuXCI6IDIxMjYsXG5cdFwiLi96aC1jbi5qc1wiOiAyMTI2LFxuXHRcIi4vemgtaGtcIjogMjEyNyxcblx0XCIuL3poLWhrLmpzXCI6IDIxMjcsXG5cdFwiLi96aC1tb1wiOiAyMTI4LFxuXHRcIi4vemgtbW8uanNcIjogMjEyOCxcblx0XCIuL3poLXR3XCI6IDIxMjksXG5cdFwiLi96aC10dy5qc1wiOiAyMTI5XG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gMjIwNzsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2207\n')},2409:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/chart/components/reactify.tsx\nvar reactify = __webpack_require__(1058);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/style/index.tsx\nvar style = __webpack_require__(455);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/prop-types/index.js\nvar prop_types = __webpack_require__(55);\nvar prop_types_default = /*#__PURE__*/__webpack_require__.n(prop_types);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(26);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/lodash/lodash.js\nvar lodash = __webpack_require__(69);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/d3/d3.js\nvar d3 = __webpack_require__(160);\nvar d3_default = /*#__PURE__*/__webpack_require__.n(d3);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/nvd3-fork/build/nv.d3.js\nvar nv_d3 = __webpack_require__(2332);\nvar nv_d3_default = /*#__PURE__*/__webpack_require__.n(nv_d3);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/mathjs/lib/esm/entry/impureFunctionsAny.generated.js\nvar impureFunctionsAny_generated = __webpack_require__(1089);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/moment/moment.js\nvar moment = __webpack_require__(1933);\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/color/index.ts + 3 modules\nvar color = __webpack_require__(864);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\nvar NumberFormatterRegistrySingleton = __webpack_require__(157);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/translation/TranslatorSingleton.ts + 1 modules\nvar TranslatorSingleton = __webpack_require__(12);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/number-format/NumberFormats.ts\nvar NumberFormats = __webpack_require__(142);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/time-format/TimeFormatterRegistrySingleton.ts + 5 modules\nvar TimeFormatterRegistrySingleton = __webpack_require__(141);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/time-format/formatters/smartDateVerbose.ts\nvar smartDateVerbose = __webpack_require__(1053);\n\n// EXTERNAL MODULE: ../superset-ui-core/src/utils/isDefined.ts\nvar isDefined = __webpack_require__(468);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/node_modules/nvd3-fork/build/nv.d3.css\nvar build_nv_d3 = __webpack_require__(2333);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-preset-chart-nvd3/src/vendor/superset/AnnotationTypes.js\nvar AnnotationTypes = __webpack_require__(130);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-preset-chart-nvd3/src/utils/isTruthy.js\nvar isTruthy = __webpack_require__(1088);\n\n// EXTERNAL MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-preset-chart-nvd3/src/utils.js\nvar utils = __webpack_require__(886);\n\n// CONCATENATED MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-preset-chart-nvd3/src/PropTypes.js\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ /* eslint-disable react/sort-prop-types */const numberOrAutoType=prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.oneOf(["auto"])]);const stringOrObjectWithLabelType=prop_types_default.a.oneOfType([prop_types_default.a.string,prop_types_default.a.shape({label:prop_types_default.a.string})]);const rgbObjectType=prop_types_default.a.shape({r:prop_types_default.a.number.isRequired,g:prop_types_default.a.number.isRequired,b:prop_types_default.a.number.isRequired});const numericXYType=prop_types_default.a.shape({x:prop_types_default.a.number,y:prop_types_default.a.number});const categoryAndValueXYType=prop_types_default.a.shape({x:prop_types_default.a.string,y:prop_types_default.a.number});const boxPlotValueType=prop_types_default.a.shape({outliers:prop_types_default.a.arrayOf(prop_types_default.a.number),Q1:prop_types_default.a.number,Q2:prop_types_default.a.number,Q3:prop_types_default.a.number,whisker_high:prop_types_default.a.number,whisker_low:prop_types_default.a.number});const bulletDataType=prop_types_default.a.shape({markerLabels:prop_types_default.a.arrayOf(prop_types_default.a.string),markerLineLabels:prop_types_default.a.arrayOf(prop_types_default.a.string),markerLines:prop_types_default.a.arrayOf(prop_types_default.a.number),markers:prop_types_default.a.arrayOf(prop_types_default.a.number),measures:prop_types_default.a.arrayOf(prop_types_default.a.number),rangeLabels:prop_types_default.a.arrayOf(prop_types_default.a.string),ranges:prop_types_default.a.arrayOf(prop_types_default.a.number)});const annotationLayerType=prop_types_default.a.shape({annotationType:prop_types_default.a.oneOf(Object.keys(AnnotationTypes["a" /* ANNOTATION_TYPES */])),color:prop_types_default.a.string,hideLine:prop_types_default.a.bool,name:prop_types_default.a.string,opacity:prop_types_default.a.string,show:prop_types_default.a.bool,showMarkers:prop_types_default.a.bool,sourceType:prop_types_default.a.string,style:prop_types_default.a.string,value:prop_types_default.a.oneOfType([prop_types_default.a.number,prop_types_default.a.string]),width:prop_types_default.a.number});\n// CONCATENATED MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-preset-chart-nvd3/src/NVD3Vis.js\nfunction ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1,source;i<arguments.length;i++){source=null!=arguments[i]?arguments[i]:{};if(i%2){ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})}else{obj[key]=value}return obj}/* eslint-disable react/sort-prop-types */ /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n *//* eslint-disable-next-line */const NO_DATA_RENDER_DATA=[{text:"No data",dy:"-.75em",class:"header"},{text:"Adjust filters or check the Datasource.",dy:".75em",class:"body"}];// Override the noData render function to make a prettier UX\n// Code adapted from https://github.com/novus/nvd3/blob/master/src/utils.js#L653\nnv_d3_default.a.utils.noData=function(chart,container){const opt=chart.options(),margin=opt.margin(),height=nv_d3_default.a.utils.availableHeight(null,container,margin),width=nv_d3_default.a.utils.availableWidth(null,container,margin),x=margin.left+width/2,y=margin.top+height/2;// Remove any previously created chart components\ncontainer.selectAll("g").remove();const noDataText=container.selectAll(".nv-noData").data(NO_DATA_RENDER_DATA);noDataText.enter().append("text").attr("class",d=>`nvd3 nv-noData ${d.class}`).attr("dy",d=>d.dy).style("text-anchor","middle");noDataText.attr("x",x).attr("y",y).text(d=>d.text)};const{getColor,getScale}=color["b" /* CategoricalColorNamespace */],MAX_MARGIN_PAD=30,MIN_HEIGHT_FOR_BRUSH=480,MAX_NO_CHARACTERS_IN_LABEL=40,BREAKPOINTS={small:340},TIMESERIES_VIZ_TYPES=["line","dual_line","line_multi","area","compare","bar","time_pivot"],CHART_ID_PREFIX="chart-id-",propTypes={data:prop_types_default.a.oneOfType([prop_types_default.a.arrayOf(prop_types_default.a.oneOfType([// pie\ncategoryAndValueXYType,// dist-bar\nprop_types_default.a.shape({key:prop_types_default.a.string,values:prop_types_default.a.arrayOf(categoryAndValueXYType)}),// area, line, compare, bar\nprop_types_default.a.shape({key:prop_types_default.a.arrayOf(prop_types_default.a.string),values:prop_types_default.a.arrayOf(numericXYType)}),// dual-line\nprop_types_default.a.shape({classed:prop_types_default.a.string,key:prop_types_default.a.string,type:prop_types_default.a.string,values:prop_types_default.a.arrayOf(numericXYType),yAxis:prop_types_default.a.number}),// box-plot\nprop_types_default.a.shape({label:prop_types_default.a.string,values:prop_types_default.a.arrayOf(boxPlotValueType)}),// bubble\nprop_types_default.a.shape({key:prop_types_default.a.string,values:prop_types_default.a.arrayOf(prop_types_default.a.object)})])),// bullet\nbulletDataType]),width:prop_types_default.a.number,height:prop_types_default.a.number,annotationData:prop_types_default.a.object,annotationLayers:prop_types_default.a.arrayOf(annotationLayerType),bottomMargin:numberOrAutoType,colorScheme:prop_types_default.a.string,comparisonType:prop_types_default.a.string,contribution:prop_types_default.a.bool,leftMargin:numberOrAutoType,onError:prop_types_default.a.func,showLegend:prop_types_default.a.bool,showMarkers:prop_types_default.a.bool,useRichTooltip:prop_types_default.a.bool,vizType:prop_types_default.a.oneOf(["area","bar","box_plot","bubble","bullet","compare","column","dist_bar","line","line_multi","time_pivot","pie","dual_line"]),xAxisFormat:prop_types_default.a.string,numberFormat:prop_types_default.a.string,xAxisLabel:prop_types_default.a.string,xAxisShowMinMax:prop_types_default.a.bool,xIsLogScale:prop_types_default.a.bool,xTicksLayout:prop_types_default.a.oneOf(["auto","staggered","45\\xB0"]),yAxisFormat:prop_types_default.a.string,yAxisBounds:prop_types_default.a.arrayOf(prop_types_default.a.number),yAxisLabel:prop_types_default.a.string,yAxisShowMinMax:prop_types_default.a.bool,yIsLogScale:prop_types_default.a.bool,// \'dist-bar\' only\norderBars:prop_types_default.a.bool,// \'bar\' or \'dist-bar\'\nisBarStacked:prop_types_default.a.bool,showBarValue:prop_types_default.a.bool,// \'bar\', \'dist-bar\' or \'column\'\nreduceXTicks:prop_types_default.a.bool,// \'bar\', \'dist-bar\' or \'area\'\nshowControls:prop_types_default.a.bool,// \'line\' only\nshowBrush:prop_types_default.a.oneOf([!0,"yes",!1,"no","auto"]),onBrushEnd:prop_types_default.a.func,// \'line-multi\' or \'dual-line\'\nyAxis2Format:prop_types_default.a.string,// \'line\', \'time-pivot\', \'dual-line\' or \'line-multi\'\nlineInterpolation:prop_types_default.a.string,// \'pie\' only\nisDonut:prop_types_default.a.bool,isPieLabelOutside:prop_types_default.a.bool,pieLabelType:prop_types_default.a.oneOf(["key","value","percent","key_value","key_percent","key_value_percent"]),showLabels:prop_types_default.a.bool,// \'area\' only\nareaStackedStyle:prop_types_default.a.string,// \'bubble\' only\nentity:prop_types_default.a.string,maxBubbleSize:prop_types_default.a.number,xField:stringOrObjectWithLabelType,yField:stringOrObjectWithLabelType,sizeField:stringOrObjectWithLabelType,// time-pivot only\nbaseColor:rgbObjectType},NOOP=()=>{},formatter=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])();// Limit on how large axes margins can grow as the chart window is resized\nfunction nvd3Vis(element,props){const{data,width:maxWidth,height:maxHeight,annotationData,annotationLayers=[],areaStackedStyle,baseColor,bottomMargin,colorScheme,comparisonType,contribution,entity,isBarStacked,isDonut,isPieLabelOutside,leftMargin,lineInterpolation="linear",markerLabels,markerLines,markerLineLabels,markers,maxBubbleSize,onBrushEnd=NOOP,onError=NOOP,orderBars,pieLabelType,rangeLabels,ranges,reduceXTicks=!1,showBarValue,showBrush,showControls,showLabels,showLegend,showMarkers,sizeField,useRichTooltip,vizType,xAxisFormat,numberFormat,xAxisLabel,xAxisShowMinMax=!1,xField,xIsLogScale,xTicksLayout,yAxisFormat,yAxis2Format,yAxisBounds,yAxis2Bounds,yAxisLabel,yAxisShowMinMax=!1,yAxis2ShowMinMax=!1,yField,yIsLogScale}=props,isExplore=null!==document.querySelector("#explorer-container"),container=element;container.innerHTML="";const activeAnnotationLayers=annotationLayers.filter(layer=>layer.show);// Search for the chart id in a parent div from the nvd3 chart\nlet chartContainer=container,chartId=null;while(chartContainer.parentElement){if(chartContainer.parentElement.id.startsWith(CHART_ID_PREFIX)){chartId=chartContainer.parentElement.id;break}chartContainer=chartContainer.parentElement}let chart,width=maxWidth,colorKey="key";container.style.width=`${maxWidth}px`;container.style.height=`${maxHeight}px`;function isVizTypes(types){return types.includes(vizType)}const drawGraph=function(){const d3Element=d3_default.a.select(element);d3Element.classed("superset-legacy-chart-nvd3",!0);d3Element.classed(`superset-legacy-chart-nvd3-${Object(lodash["kebabCase"])(vizType)}`,!0);let svg=d3Element.select("svg");if(svg.empty()){svg=d3Element.append("svg")}const height="bullet"===vizType?Math.min(maxHeight,50):maxHeight,isTimeSeries=isVizTypes(TIMESERIES_VIZ_TYPES),staggerLabels="staggered"===xTicksLayout,xLabelRotation="auto"===xTicksLayout&&isVizTypes(["column","dist_bar"])||"45\\xB0"===xTicksLayout?45:0;if(45===xLabelRotation&&Object(isTruthy["a" /* default */])(showBrush)){onError(Object(TranslatorSingleton["e" /* t */])("You cannot use 45\\xB0 tick layout along with the time range filter"));return null}const canShowBrush=Object(isTruthy["a" /* default */])(showBrush)||"auto"===showBrush&&maxHeight>=MIN_HEIGHT_FOR_BRUSH&&"45\\xB0"!==xTicksLayout,numberFormatter=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(numberFormat);switch(vizType){case"line":if(canShowBrush){chart=nv_d3_default.a.models.lineWithFocusChart();if(staggerLabels){// Give a bit more room to focus area if X axis ticks are staggered\nchart.focus.margin({bottom:40});chart.focusHeight(80)}chart.focus.xScale(d3_default.a.time.scale.utc())}else{chart=nv_d3_default.a.models.lineChart()}chart.xScale(d3_default.a.time.scale.utc());chart.interpolate(lineInterpolation);chart.clipEdge(!1);break;case"time_pivot":chart=nv_d3_default.a.models.lineChart();chart.xScale(d3_default.a.time.scale.utc());chart.interpolate(lineInterpolation);break;case"dual_line":case"line_multi":chart=nv_d3_default.a.models.multiChart();chart.interpolate(lineInterpolation);chart.xScale(d3_default.a.time.scale.utc());break;case"bar":chart=nv_d3_default.a.models.multiBarChart().showControls(showControls).groupSpacing(.1);if(!reduceXTicks){width=Object(utils["b" /* computeBarChartWidth */])(data,isBarStacked,maxWidth)}chart.width(width);chart.xAxis.showMaxMin(!1);chart.stacked(isBarStacked);break;case"dist_bar":chart=nv_d3_default.a.models.multiBarChart().showControls(showControls).reduceXTicks(reduceXTicks).groupSpacing(.1);// Distance between each group of bars.\nchart.xAxis.showMaxMin(!1);chart.stacked(isBarStacked);if(orderBars){data.forEach(d=>{d.values.sort((a,b)=>Object(utils["u" /* tryNumify */])(a.x)<Object(utils["u" /* tryNumify */])(b.x)?-1:1)})}if(!reduceXTicks){width=Object(utils["b" /* computeBarChartWidth */])(data,isBarStacked,maxWidth)}chart.width(width);break;case"pie":chart=nv_d3_default.a.models.pieChart();colorKey="x";chart.valueFormat(numberFormatter);if(isDonut){chart.donut(!0)}chart.showLabels(showLabels);chart.labelsOutside(isPieLabelOutside);// Configure the minimum slice size for labels to show up\nchart.labelThreshold(.05);chart.cornerRadius(!0);if(["key","value","percent"].includes(pieLabelType)){chart.labelType(pieLabelType)}else if("key_value"===pieLabelType){chart.labelType(d=>`${d.data.x}: ${numberFormatter(d.data.y)}`)}else{// pieLabelType in [\'key_percent\', \'key_value_percent\']\nconst total=d3_default.a.sum(data,d=>d.y),percentFormatter=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(NumberFormats["a" /* default */].PERCENT_2_POINT);if("key_percent"===pieLabelType){chart.tooltip.valueFormatter(d=>percentFormatter(d));chart.labelType(d=>`${d.data.x}: ${percentFormatter(d.data.y/total)}`)}else{// pieLabelType === \'key_value_percent\'\nchart.tooltip.valueFormatter(d=>`${numberFormatter(d)} (${percentFormatter(d/total)})`);chart.labelType(d=>`${d.data.x}: ${numberFormatter(d.data.y)} (${percentFormatter(d.data.y/total)})`)}}// Pie chart does not need top margin\nchart.margin({top:0});break;case"column":chart=nv_d3_default.a.models.multiBarChart().reduceXTicks(!1);break;case"compare":chart=nv_d3_default.a.models.cumulativeLineChart();chart.xScale(d3_default.a.time.scale.utc());chart.useInteractiveGuideline(!0);chart.xAxis.showMaxMin(!1);break;case"bubble":chart=nv_d3_default.a.models.scatterChart();chart.showDistX(!1);chart.showDistY(!1);chart.tooltip.contentGenerator(d=>Object(utils["h" /* generateBubbleTooltipContent */])({point:d.point,entity,xField,yField,sizeField,xFormatter:Object(utils["o" /* getTimeOrNumberFormatter */])(xAxisFormat),yFormatter:Object(utils["o" /* getTimeOrNumberFormatter */])(yAxisFormat),sizeFormatter:formatter}));chart.pointRange([5,maxBubbleSize**2]);chart.pointDomain([0,d3_default.a.max(data,d=>d3_default.a.max(d.values,v=>v.size))]);break;case"area":chart=nv_d3_default.a.models.stackedAreaChart();chart.showControls(showControls);chart.style(areaStackedStyle);chart.xScale(d3_default.a.time.scale.utc());break;case"box_plot":colorKey="label";chart=nv_d3_default.a.models.boxPlotChart();chart.x(d=>d.label);chart.maxBoxWidth(75);// prevent boxes from being incredibly wide\nbreak;case"bullet":chart=nv_d3_default.a.models.bulletChart();data.rangeLabels=rangeLabels;data.ranges=ranges;data.markerLabels=markerLabels;data.markerLines=markerLines;data.markerLineLabels=markerLineLabels;data.markers=markers;break;default:throw new Error(`Unrecognized visualization for nvd3${vizType}`);}// Assuming the container has padding already other than for top margin\nchart.margin({left:0,bottom:0});if(showBarValue){Object(utils["e" /* drawBarValues */])(svg,data,isBarStacked,yAxisFormat);chart.dispatch.on("stateChange.drawBarValues",()=>{Object(utils["e" /* drawBarValues */])(svg,data,isBarStacked,yAxisFormat)})}if(canShowBrush&&onBrushEnd!==NOOP){if(chart.focus){chart.focus.dispatch.on("brush",event=>{const timeRange=Object(utils["s" /* stringifyTimeRange */])(event.extent);if(timeRange){event.brush.on("brushend",()=>{onBrushEnd(timeRange)})}})}}if(chart.xAxis&&chart.xAxis.staggerLabels){chart.xAxis.staggerLabels(staggerLabels)}if(chart.xAxis&&chart.xAxis.rotateLabels){chart.xAxis.rotateLabels(xLabelRotation)}if(chart.x2Axis&&chart.x2Axis.staggerLabels){chart.x2Axis.staggerLabels(staggerLabels)}if(chart.x2Axis&&chart.x2Axis.rotateLabels){chart.x2Axis.rotateLabels(xLabelRotation)}if("showLegend"in chart&&"undefined"!=typeof showLegend){if(width<BREAKPOINTS.small&&"pie"!==vizType){chart.showLegend(!1)}else{chart.showLegend(showLegend)}}if(yIsLogScale){chart.yScale(d3_default.a.scale.log())}if(xIsLogScale){chart.xScale(d3_default.a.scale.log())}let xAxisFormatter;if(isTimeSeries){xAxisFormatter=Object(TimeFormatterRegistrySingleton["d" /* getTimeFormatter */])(xAxisFormat);// In tooltips, always use the verbose time format\nchart.interactiveLayer.tooltip.headerFormatter(smartDateVerbose["a" /* default */])}else{xAxisFormatter=Object(utils["o" /* getTimeOrNumberFormatter */])(xAxisFormat)}if(chart.x2Axis&&chart.x2Axis.tickFormat){chart.x2Axis.tickFormat(xAxisFormatter)}if(chart.xAxis&&chart.xAxis.tickFormat){const isXAxisString=isVizTypes(["dist_bar","box_plot"]);if(isXAxisString){chart.xAxis.tickFormat(d=>d.length>MAX_NO_CHARACTERS_IN_LABEL?`${d.slice(0,Math.max(0,MAX_NO_CHARACTERS_IN_LABEL))}â€¦`:d)}else{chart.xAxis.tickFormat(xAxisFormatter)}}let yAxisFormatter=Object(utils["o" /* getTimeOrNumberFormatter */])(yAxisFormat);if(chart.yAxis&&chart.yAxis.tickFormat){if((contribution||"percentage"===comparisonType)&&(!yAxisFormat||yAxisFormat===NumberFormats["a" /* default */].SMART_NUMBER||yAxisFormat===NumberFormats["a" /* default */].SMART_NUMBER_SIGNED)){// When computing a "Percentage" or "Contribution" selected,\n// force a percentage format if no custom formatting set\nyAxisFormatter=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(NumberFormats["a" /* default */].PERCENT_1_POINT)}chart.yAxis.tickFormat(yAxisFormatter)}if(chart.y2Axis&&chart.y2Axis.tickFormat){chart.y2Axis.tickFormat(yAxisFormatter)}if(chart.yAxis){chart.yAxis.ticks(5)}if(chart.y2Axis){chart.y2Axis.ticks(5)}// Set showMaxMin for all axis\nObject(utils["r" /* setAxisShowMaxMin */])(chart.xAxis,xAxisShowMinMax);Object(utils["r" /* setAxisShowMaxMin */])(chart.x2Axis,xAxisShowMinMax);Object(utils["r" /* setAxisShowMaxMin */])(chart.yAxis,yAxisShowMinMax);Object(utils["r" /* setAxisShowMaxMin */])(chart.y2Axis,yAxis2ShowMinMax||yAxisShowMinMax);if("time_pivot"===vizType){if(baseColor){const{r,g,b}=baseColor;chart.color(d=>{const alpha=0<d.rank?.5*d.perc:1;return`rgba(${r}, ${g}, ${b}, ${alpha})`})}chart.useInteractiveGuideline(!0);chart.interactiveLayer.tooltip.contentGenerator(d=>Object(utils["l" /* generateTimePivotTooltip */])(d,xAxisFormatter,yAxisFormatter))}else if("bullet"!==vizType){const colorFn=getScale(colorScheme);chart.color(d=>d.color||colorFn(Object(utils["a" /* cleanColorInput */])(d[colorKey])))}if(isVizTypes(["line","area"])&&useRichTooltip){chart.useInteractiveGuideline(!0);if("line"===vizType){chart.interactiveLayer.tooltip.contentGenerator(d=>Object(utils["k" /* generateRichLineTooltipContent */])(d,smartDateVerbose["a" /* default */],yAxisFormatter))}else{// area chart\nchart.interactiveLayer.tooltip.contentGenerator(d=>Object(utils["g" /* generateAreaChartTooltipContent */])(d,smartDateVerbose["a" /* default */],yAxisFormatter,chart))}}if(isVizTypes(["compare"])){chart.interactiveLayer.tooltip.contentGenerator(d=>Object(utils["i" /* generateCompareTooltipContent */])(d,yAxisFormatter))}if(isVizTypes(["dual_line","line_multi"])){const yAxisFormatter1=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(yAxisFormat),yAxisFormatter2=Object(NumberFormatterRegistrySingleton["c" /* getNumberFormatter */])(yAxis2Format);chart.yAxis1.tickFormat(yAxisFormatter1);chart.yAxis2.tickFormat(yAxisFormatter2);const yAxisFormatters=data.map(datum=>1===datum.yAxis?yAxisFormatter1:yAxisFormatter2);chart.useInteractiveGuideline(!0);chart.interactiveLayer.tooltip.contentGenerator(d=>Object(utils["j" /* generateMultiLineTooltipContent */])(d,xAxisFormatter,yAxisFormatters))}// This is needed for correct chart dimensions if a chart is rendered in a hidden container\nchart.width(width);chart.height(height);svg.datum(data).transition().duration(500).attr("height",height).attr("width",width).call(chart);// For log scale, only show 1, 10, 100, 1000, ...\nif(yIsLogScale){chart.yAxis.tickFormat(d=>0!==d&&0==Math.log10(d)%1?yAxisFormatter(d):"")}if(0<xLabelRotation){// shift labels to the left so they look better\nconst xTicks=svg.select(".nv-x.nv-axis > g").selectAll("g");xTicks.selectAll("text").attr("dx",-6.5)}const applyYAxisBounds=()=>{if(chart.yDomain&&Array.isArray(yAxisBounds)&&2===yAxisBounds.length){const[customMin,customMax]=yAxisBounds,hasCustomMin=Object(isDefined["a" /* default */])(customMin)&&!Number.isNaN(customMin),hasCustomMax=Object(isDefined["a" /* default */])(customMax)&&!Number.isNaN(customMax);if((hasCustomMin||hasCustomMax)&&"area"===vizType&&"expand"===chart.style()){// Because there are custom bounds, we need to override them back to 0%-100% since this\n// is an expanded area chart\nchart.yDomain([0,1])}else if((hasCustomMin||hasCustomMax)&&"area"===vizType&&"stream"===chart.style()){// Because there are custom bounds, we need to override them back to the domain of the\n// data since this is a stream area chart\nchart.yDomain(Object(utils["c" /* computeStackedYDomain */])(data))}else if(hasCustomMin&&hasCustomMax){// Override the y domain if there\'s both a custom min and max\nchart.yDomain([customMin,customMax]);chart.clipEdge(!0)}else if(hasCustomMin||hasCustomMax){// Only one of the bounds has been set, so we need to manually calculate the other one\nlet[trueMin,trueMax]=[0,1];// These viz types can be stacked\n// They correspond to the nvd3 stackedAreaChart and multiBarChart\nif("area"===vizType||isVizTypes(["bar","dist_bar"])&&chart.stacked()){// This is a stacked area chart or a stacked bar chart\n[trueMin,trueMax]=Object(utils["c" /* computeStackedYDomain */])(data)}else{[trueMin,trueMax]=Object(utils["d" /* computeYDomain */])(data)}const min=hasCustomMin?customMin:trueMin,max=hasCustomMax?customMax:trueMax;chart.yDomain([min,max]);chart.clipEdge(!0)}}};applyYAxisBounds();// Also reapply on each state change to account for enabled/disabled series\nif(chart.dispatch&&chart.dispatch.stateChange){chart.dispatch.on("stateChange.applyYAxisBounds",applyYAxisBounds)}// align yAxis1 and yAxis2 ticks\nif(isVizTypes(["dual_line","line_multi"])){const count=chart.yAxis1.ticks(),ticks1=chart.yAxis1.scale().domain(chart.yAxis1.domain()).nice(count).ticks(count),ticks2=chart.yAxis2.scale().domain(chart.yAxis2.domain()).nice(count).ticks(count),difference=ticks1.length-ticks2.length;if(0<ticks1.length&&0<ticks2.length&&0!==difference){const smallest=0>difference?ticks1:ticks2,delta=smallest[1]-smallest[0];for(let i=0;i<Math.abs(difference);i+=1){if(0==i%2){smallest.unshift(smallest[0]-delta)}else{smallest.push(smallest[smallest.length-1]+delta)}}chart.yDomain1([ticks1[0],ticks1[ticks1.length-1]]);chart.yDomain2([ticks2[0],ticks2[ticks2.length-1]]);chart.yAxis1.tickValues(ticks1);chart.yAxis2.tickValues(ticks2)}chart.yDomain1([yAxisBounds[0]||ticks1[0],yAxisBounds[1]||ticks1[ticks1.length-1]]);chart.yDomain2([yAxis2Bounds[0]||ticks2[0],yAxis2Bounds[1]||ticks2[ticks2.length-1]])}if(showMarkers){svg.selectAll(".nv-point").style("stroke-opacity",1).style("fill-opacity",1);// redo on legend toggle; nvd3 calls the callback *before* the line is\n// drawn, so we need to add a small delay here\nchart.dispatch.on("stateChange.showMarkers",()=>{setTimeout(()=>{svg.selectAll(".nv-point").style("stroke-opacity",1).style("fill-opacity",1)},10)})}if(chart.yAxis!==void 0||chart.yAxis2!==void 0){// Hack to adjust y axis left margin to accommodate long numbers\nconst marginPad=Math.ceil(Math.min(maxWidth*(isExplore?.01:.03),MAX_MARGIN_PAD)),margins=chart.margin();// Hack to adjust margins to accommodate long axis tick labels.\n// - has to be done only after the chart has been rendered once\n// - measure the width or height of the labels\n// ---- (x axis labels are rotated 45 degrees so we use height),\n// - adjust margins based on these measures and render again\nif(chart.xAxis){margins.bottom=28}const maxYAxisLabelWidth=Object(utils["n" /* getMaxLabelSize */])(svg,chart.yAxis2?"nv-y1":"nv-y"),maxXAxisLabelHeight=Object(utils["n" /* getMaxLabelSize */])(svg,"nv-x");margins.left=maxYAxisLabelWidth+marginPad;if(yAxisLabel&&""!==yAxisLabel){margins.left+=25}if(showBarValue){// Add more margin to avoid label colliding with legend.\nmargins.top+=24}if(xAxisShowMinMax){// If x bounds are shown, we need a right margin\nmargins.right=Math.max(20,maxXAxisLabelHeight/2)+marginPad}if(45===xLabelRotation){margins.bottom=maxXAxisLabelHeight*Math.sin(Math.PI*xLabelRotation/180)+marginPad+30;margins.right=maxXAxisLabelHeight*Math.cos(Math.PI*xLabelRotation/180)+marginPad}else if(staggerLabels){margins.bottom=40}if(isVizTypes(["dual_line","line_multi"])){const maxYAxis2LabelWidth=Object(utils["n" /* getMaxLabelSize */])(svg,"nv-y2");margins.right=maxYAxis2LabelWidth+marginPad}if(bottomMargin&&"auto"!==bottomMargin){margins.bottom=parseInt(bottomMargin,10)}if(leftMargin&&"auto"!==leftMargin){margins.left=leftMargin}if(xAxisLabel&&""!==xAxisLabel&&chart.xAxis){margins.bottom+=25;let distance=0;if(margins.bottom&&!Number.isNaN(margins.bottom)){distance=margins.bottom-45}// nvd3 bug axisLabelDistance is disregarded on xAxis\n// https://github.com/krispo/angular-nvd3/issues/90\nchart.xAxis.axisLabel(xAxisLabel).axisLabelDistance(distance)}if(yAxisLabel&&""!==yAxisLabel&&chart.yAxis){let distance=0;if(margins.left&&!Number.isNaN(margins.left)){distance=margins.left-70}chart.yAxis.axisLabel(yAxisLabel).axisLabelDistance(distance)}if(isTimeSeries&&annotationData&&0<activeAnnotationLayers.length){// Time series annotations add additional data\nconst timeSeriesAnnotations=activeAnnotationLayers.filter(layer=>layer.annotationType===AnnotationTypes["c" /* default */].TIME_SERIES).reduce((bushel,a)=>bushel.concat((annotationData[a.name]||[]).map(series=>{if(!series){return{}}const key=Array.isArray(series.key)?`${a.name}, ${series.key.join(", ")}`:`${a.name}, ${series.key}`;return _objectSpread(_objectSpread({},series),{},{key,color:a.color,strokeWidth:a.width,classed:`${a.opacity} ${a.style} nv-timeseries-annotation-layer showMarkers${a.showMarkers} hideLine${a.hideLine}`})})),[]);data.push(...timeSeriesAnnotations)}// Uniquely identify tooltips based on chartId so this chart instance only\n// controls its own tooltips\nif(chartId){if(chart&&chart.interactiveLayer&&chart.interactiveLayer.tooltip){chart.interactiveLayer.tooltip.classes([Object(utils["m" /* generateTooltipClassName */])(chartId)])}if(chart&&chart.tooltip){chart.tooltip.classes([Object(utils["m" /* generateTooltipClassName */])(chartId)])}}// render chart\nchart.margin(margins);svg.datum(data).transition().duration(500).attr("width",width).attr("height",height).call(chart);// On scroll, hide (not remove) tooltips so they can reappear on hover.\n// Throttle to only 4x/second.\nwindow.addEventListener("scroll",Object(lodash["throttle"])(()=>Object(utils["p" /* hideTooltips */])(!1),250));// The below code should be run AFTER rendering because chart is updated in call()\nif(isTimeSeries&&0<activeAnnotationLayers.length){// Formula annotations\nconst formulas=activeAnnotationLayers.filter(a=>a.annotationType===AnnotationTypes["c" /* default */].FORMULA).map(a=>_objectSpread(_objectSpread({},a),{},{formula:Object(impureFunctionsAny_generated["z" /* parse */])(a.value)}));let xMax,xMin,xScale;if("bar"===vizType){xMin=d3_default.a.min(data[0].values,d=>d.x);xMax=d3_default.a.max(data[0].values,d=>d.x);xScale=d3_default.a.scale.quantile().domain([xMin,xMax]).range(chart.xAxis.range())}else{xMin=chart.xAxis.scale().domain()[0].valueOf();xMax=chart.xAxis.scale().domain()[1].valueOf();if(chart.xScale){xScale=chart.xScale()}else if(chart.xAxis.scale){xScale=chart.xAxis.scale()}else{xScale=d3_default.a.scale.linear()}}if(xScale&&xScale.clamp){xScale.clamp(!0)}if(0<formulas.length){const xValues=[];if("bar"===vizType){// For bar-charts we want one data point evaluated for every\n// data point that will be displayed.\nconst distinct=data.reduce((xVals,d)=>{d.values.forEach(x=>xVals.add(x.x));return xVals},new Set);xValues.push(...distinct.values());xValues.sort()}else{// For every other time visualization it should be ok, to have a\n// data points in even intervals.\nlet period=Math.min(...data.map(d=>Math.min(...d.values.slice(1).map((v,i)=>v.x-d.values[i].x))));const dataPoints=(xMax-xMin)/(period||1);// make sure that there are enough data points and not too many\nperiod=100>dataPoints?(xMax-xMin)/100:period;period=500<dataPoints?(xMax-xMin)/500:period;xValues.push(xMin);for(let x=xMin;x<xMax;x+=period){xValues.push(x)}xValues.push(xMax)}const formulaData=formulas.map(fo=>({key:fo.name,values:xValues.map(x=>({y:fo.formula.evaluate({x}),x})),color:fo.color,strokeWidth:fo.width,classed:`${fo.opacity} ${fo.style}`}));data.push(...formulaData)}const xAxis=chart.xAxis1?chart.xAxis1:chart.xAxis,yAxis=chart.yAxis1?chart.yAxis1:chart.yAxis,chartWidth=xAxis.scale().range()[1],annotationHeight=yAxis.scale().range()[0];if(annotationData){// Event annotations\nactiveAnnotationLayers.filter(x=>x.annotationType===AnnotationTypes["c" /* default */].EVENT&&annotationData&&annotationData[x.name]).forEach((config,index)=>{const e=Object(AnnotationTypes["b" /* applyNativeColumns */])(config),annotations=d3_default.a.select(element).select(".nv-wrap").append("g").attr("class",`nv-event-annotation-layer-${index}`),aColor=e.color||getColor(Object(utils["a" /* cleanColorInput */])(e.name),colorScheme),tip=Object(utils["t" /* tipFactory */])(_objectSpread(_objectSpread({},e),{},{annotationTipClass:`arrow-down nv-event-annotation-layer-${config.sourceType}`})),records=(annotationData[e.name].records||[]).map(r=>{const timeValue=new Date(moment_default.a.utc(r[e.timeColumn]));return _objectSpread(_objectSpread({},r),{},{[e.timeColumn]:timeValue})}).filter(record=>!Number.isNaN(record[e.timeColumn].getMilliseconds()));// Add event annotation layer\nif(0<records.length){annotations.selectAll("line").data(records).enter().append("line").attr({x1:d=>xScale(new Date(d[e.timeColumn])),y1:0,x2:d=>xScale(new Date(d[e.timeColumn])),y2:annotationHeight}).attr("class",`${e.opacity} ${e.style}`).style("stroke",aColor).style("stroke-width",e.width).on("mouseover",tip.show).on("mouseout",tip.hide).call(tip)}// update annotation positions on brush event\nif(chart.focus){chart.focus.dispatch.on("onBrush.event-annotation",()=>{annotations.selectAll("line").data(records).attr({x1:d=>xScale(new Date(d[e.timeColumn])),y1:0,x2:d=>xScale(new Date(d[e.timeColumn])),y2:annotationHeight,opacity:d=>{const x=xScale(new Date(d[e.timeColumn]));return 0<x&&x<chartWidth?1:0}})})}});// Interval annotations\nactiveAnnotationLayers.filter(x=>x.annotationType===AnnotationTypes["c" /* default */].INTERVAL&&annotationData&&annotationData[x.name]).forEach((config,index)=>{const e=Object(AnnotationTypes["b" /* applyNativeColumns */])(config),annotations=d3_default.a.select(element).select(".nv-wrap").append("g").attr("class",`nv-interval-annotation-layer-${index}`),aColor=e.color||getColor(Object(utils["a" /* cleanColorInput */])(e.name),colorScheme),tip=Object(utils["t" /* tipFactory */])(e),records=(annotationData[e.name].records||[]).map(r=>{const timeValue=new Date(moment_default.a.utc(r[e.timeColumn])),intervalEndValue=new Date(moment_default.a.utc(r[e.intervalEndColumn]));return _objectSpread(_objectSpread({},r),{},{[e.timeColumn]:timeValue,[e.intervalEndColumn]:intervalEndValue})}).filter(record=>!Number.isNaN(record[e.timeColumn].getMilliseconds())&&!Number.isNaN(record[e.intervalEndColumn].getMilliseconds()));// Add interval annotation layer\nif(0<records.length){annotations.selectAll("rect").data(records).enter().append("rect").attr({x:d=>Math.min(xScale(new Date(d[e.timeColumn])),xScale(new Date(d[e.intervalEndColumn]))),y:0,width:d=>Math.max(Math.abs(xScale(new Date(d[e.intervalEndColumn]))-xScale(new Date(d[e.timeColumn]))),1),height:annotationHeight}).attr("class",`${e.opacity} ${e.style}`).style("stroke-width",e.width).style("stroke",aColor).style("fill",aColor).style("fill-opacity",.2).on("mouseover",tip.show).on("mouseout",tip.hide).call(tip)}// update annotation positions on brush event\nif(chart.focus){chart.focus.dispatch.on("onBrush.interval-annotation",()=>{annotations.selectAll("rect").data(records).attr({x:d=>xScale(new Date(d[e.timeColumn])),width:d=>{const x1=xScale(new Date(d[e.timeColumn])),x2=xScale(new Date(d[e.intervalEndColumn]));return x2-x1}})})}})}// rerender chart appended with annotation layer\nsvg.datum(data).attr("height",height).attr("width",width).call(chart);// Display styles for Time Series Annotations\nchart.dispatch.on("renderEnd.timeseries-annotation",()=>{d3_default.a.selectAll(".slice_container .nv-timeseries-annotation-layer.showMarkerstrue .nv-point").style("stroke-opacity",1).style("fill-opacity",1);d3_default.a.selectAll(".slice_container .nv-timeseries-annotation-layer.hideLinetrue").style("stroke-width",0)})}}Object(utils["v" /* wrapTooltip */])(chart);return chart};// Remove tooltips before rendering chart, if the chart is being re-rendered sometimes\n// there are left over tooltips in the dom,\n// this will clear them before rendering the chart again.\nif(chartId){Object(utils["q" /* removeTooltip */])(chartId)}else{Object(utils["p" /* hideTooltips */])(!0)}nv_d3_default.a.addGraph(drawGraph)}nvd3Vis.displayName="NVD3";nvd3Vis.propTypes=propTypes;/* harmony default export */ var NVD3Vis = (nvd3Vis);\n// CONCATENATED MODULE: /Users/erik_ritter/repos/github.com/apache-superset/superset-ui/plugins/legacy-preset-chart-nvd3/src/ReactNVD3.jsx\nfunction _objectWithoutProperties(source,excluded){if(null==source)return{};var target=_objectWithoutPropertiesLoose(source,excluded),key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(0<=excluded.indexOf(key))continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var target={},sourceKeys=Object.keys(source),key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(0<=excluded.indexOf(key))continue;target[key]=source[key]}return target}/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */function componentWillUnmount(){const{id}=this.props;if(null!==id&&id!==void 0){Object(utils["q" /* removeTooltip */])(id)}else{Object(utils["p" /* hideTooltips */])(!0)}}const ReactNVD3=Object(reactify["a" /* default */])(NVD3Vis,{componentWillUnmount}),NVD3=(_ref)=>{let{className}=_ref,otherProps=_objectWithoutProperties(_ref,["className"]);return/*#__PURE__*/react_default.a.createElement("div",{className:className},/*#__PURE__*/react_default.a.createElement(ReactNVD3,otherProps))};NVD3.displayName="NVD3";NVD3.propTypes={className:prop_types_default.a.string.isRequired};/* harmony default export */ var src_ReactNVD3 = __webpack_exports__["default"] = (Object(style["g" /* styled */])(NVD3)`\n  .superset-legacy-chart-nvd3-dist-bar, .superset-legacy-chart-nvd3-bar {\n    overflow-x: auto !important;\n    svg {\n      &.nvd3-svg {\n        width: auto;\n        font-size: ${({theme})=>theme.typography.sizes.m};\n      }\n    }\n  }\n  .superset-legacy-chart-nvd3 {\n    nv-x text {\n      font-size: ${({theme})=>theme.typography.sizes.m};\n    }\n    g.superset path {\n      stroke-dasharray: 5, 5;\n    }\n    .nvtooltip tr.highlight td {\n      font-weight: ${({theme})=>theme.typography.weights.bold};\n      font-size: 15px !important;\n    }\n    text.nv-axislabel {\n      font-size: ${({theme})=>theme.typography.sizes.m} !important;\n    }\n    g.solid path,\n    line.solid {\n      stroke-dasharray: unset;\n    }\n    g.dashed path,\n    line.dashed {\n      stroke-dasharray: 5, 5;\n    }\n    g.longDashed path,\n    line.dotted {\n      stroke-dasharray: 1, 1;\n    }\n\n    g.opacityLow path,\n    line.opacityLow {\n      stroke-opacity: 0.2;\n    }\n\n    g.opacityMedium path,\n    line.opacityMedium {\n      stroke-opacity: 0.5;\n    }\n    g.opacityHigh path,\n    line.opacityHigh {\n      stroke-opacity: 0.8;\n    }\n    g.time-shift-0 path,\n    line.time-shift-0 {\n      stroke-dasharray: 5, 5;\n    }\n    g.time-shift-1 path,\n    line.time-shift-1 {\n      stroke-dasharray: 1, 5;\n    }\n    g.time-shift-2 path,\n    line.time-shift-3 {\n      stroke-dasharray: 5, 1;\n    }\n    g.time-shift-3 path,\n    line.time-shift-3 {\n      stroke-dasharray: 5, 1;\n    }\n    g.time-shift-4 path,\n    line.time-shift-4 {\n      stroke-dasharray: 5, 10;\n    }\n    g.time-shift-5 path,\n    line.time-shift-5 {\n      stroke-dasharray: 0.9;\n    }\n    g.time-shift-6 path,\n    line.time-shift-6 {\n      stroke-dasharray: 15, 10, 5;\n    }\n    g.time-shift-7 path,\n    line.time-shift-7 {\n      stroke-dasharray: 15, 10, 5, 10;\n    }\n    g.time-shift-8 path,\n    line.time-shift-8 {\n      stroke-dasharray: 15, 10, 5, 10, 15;\n    }\n    g.time-shift-9 path,\n    line.time-shift-9 {\n      stroke-dasharray: 5, 5, 1, 5;\n    }\n    .nv-noData.body {\n      font-size: ${({theme})=>theme.typography.sizes.m};\n      font-weight: ${({theme})=>theme.typography.weights.normal};\n    }\n  }\n  .superset-legacy-chart-nvd3-tr-highlight {\n    border-top: 1px solid;\n    border-bottom: 1px solid;\n    font-weight: ${({theme})=>theme.typography.weights.bold};\n  }\n  .superset-legacy-chart-nvd3-tr-total {\n    font-weight: ${({theme})=>theme.typography.weights.bold};\n  }\n  .nvtooltip {\n    .tooltip-header {\n      white-space: nowrap;\n      font-weight: ${({theme})=>theme.typography.weights.bold};\n    }\n    tbody tr:not(.tooltip-header) td:nth-child(2) {\n      word-break: break-word;\n    }\n  }\n  .d3-tip.nv-event-annotation-layer-table,\n  .d3-tip.nv-event-annotation-layer-NATIVE {\n    width: 200px;\n    border-radius: 2px;\n    background-color: #484848;\n    fill-opacity: 0.6;\n    margin: 8px;\n    padding: 8px;\n    color: #fff;\n    &:after {\n      content: \'\\25BC\';\n      font-size: ${({theme})=>theme.typography.sizes.m};\n      color: #484848;\n      position: absolute;\n      bottom: -14px;\n      left: 94px;\n    }\n  }\n`);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQwOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcHJlc2V0LWNoYXJ0LW52ZDMvc3JjL1Byb3BUeXBlcy5qcz82ZmNjIiwid2VicGFjazovLy8vVXNlcnMvZXJpa19yaXR0ZXIvcmVwb3MvZ2l0aHViLmNvbS9hcGFjaGUtc3VwZXJzZXQvc3VwZXJzZXQtdWkvcGx1Z2lucy9sZWdhY3ktcHJlc2V0LWNoYXJ0LW52ZDMvc3JjL05WRDNWaXMuanM/ZjZjOCIsIndlYnBhY2s6Ly8vL1VzZXJzL2VyaWtfcml0dGVyL3JlcG9zL2dpdGh1Yi5jb20vYXBhY2hlLXN1cGVyc2V0L3N1cGVyc2V0LXVpL3BsdWdpbnMvbGVnYWN5LXByZXNldC1jaGFydC1udmQzL3NyYy9SZWFjdE5WRDMuanN4PzZkNGIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogZXNsaW50LWRpc2FibGUgcmVhY3Qvc29ydC1wcm9wLXR5cGVzICovXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgQU5OT1RBVElPTl9UWVBFUyB9IGZyb20gJy4vdmVuZG9yL3N1cGVyc2V0L0Fubm90YXRpb25UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBudW1iZXJPckF1dG9UeXBlID0gUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm51bWJlciwgUHJvcFR5cGVzLm9uZU9mKFsnYXV0byddKV0pO1xuXG5leHBvcnQgY29uc3Qgc3RyaW5nT3JPYmplY3RXaXRoTGFiZWxUeXBlID0gUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gIFByb3BUeXBlcy5zdHJpbmcsXG4gIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIH0pLFxuXSk7XG5cbmV4cG9ydCBjb25zdCByZ2JPYmplY3RUeXBlID0gUHJvcFR5cGVzLnNoYXBlKHtcbiAgcjogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICBnOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIGI6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbn0pO1xuXG5leHBvcnQgY29uc3QgbnVtZXJpY1hZVHlwZSA9IFByb3BUeXBlcy5zaGFwZSh7XG4gIHg6IFByb3BUeXBlcy5udW1iZXIsXG4gIHk6IFByb3BUeXBlcy5udW1iZXIsXG59KTtcblxuZXhwb3J0IGNvbnN0IGNhdGVnb3J5QW5kVmFsdWVYWVR5cGUgPSBQcm9wVHlwZXMuc2hhcGUoe1xuICB4OiBQcm9wVHlwZXMuc3RyaW5nLFxuICB5OiBQcm9wVHlwZXMubnVtYmVyLFxufSk7XG5cbmV4cG9ydCBjb25zdCBib3hQbG90VmFsdWVUeXBlID0gUHJvcFR5cGVzLnNoYXBlKHtcbiAgb3V0bGllcnM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5udW1iZXIpLFxuICBRMTogUHJvcFR5cGVzLm51bWJlcixcbiAgUTI6IFByb3BUeXBlcy5udW1iZXIsXG4gIFEzOiBQcm9wVHlwZXMubnVtYmVyLFxuICB3aGlza2VyX2hpZ2g6IFByb3BUeXBlcy5udW1iZXIsXG4gIHdoaXNrZXJfbG93OiBQcm9wVHlwZXMubnVtYmVyLFxufSk7XG5cbmV4cG9ydCBjb25zdCBidWxsZXREYXRhVHlwZSA9IFByb3BUeXBlcy5zaGFwZSh7XG4gIG1hcmtlckxhYmVsczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG4gIG1hcmtlckxpbmVMYWJlbHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpLFxuICBtYXJrZXJMaW5lczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm51bWJlciksXG4gIG1hcmtlcnM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5udW1iZXIpLFxuICBtZWFzdXJlczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm51bWJlciksXG4gIHJhbmdlTGFiZWxzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgcmFuZ2VzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubnVtYmVyKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgYW5ub3RhdGlvbkxheWVyVHlwZSA9IFByb3BUeXBlcy5zaGFwZSh7XG4gIGFubm90YXRpb25UeXBlOiBQcm9wVHlwZXMub25lT2YoT2JqZWN0LmtleXMoQU5OT1RBVElPTl9UWVBFUykpLFxuICBjb2xvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgaGlkZUxpbmU6IFByb3BUeXBlcy5ib29sLFxuICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBvcGFjaXR5OiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzaG93OiBQcm9wVHlwZXMuYm9vbCxcbiAgc2hvd01hcmtlcnM6IFByb3BUeXBlcy5ib29sLFxuICBzb3VyY2VUeXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzdHlsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgdmFsdWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5udW1iZXIsIFByb3BUeXBlcy5zdHJpbmddKSxcbiAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG59KTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIHJlYWN0L3NvcnQtcHJvcC10eXBlcyAqL1xuLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsga2ViYWJDYXNlLCB0aHJvdHRsZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IG52IGZyb20gJ252ZDMtZm9yayc7XG5pbXBvcnQgeyBwYXJzZSBhcyBtYXRoanNQYXJzZSB9IGZyb20gJ21hdGhqcyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtcbiAgdCxcbiAgaXNEZWZpbmVkLFxuICBnZXRUaW1lRm9ybWF0dGVyLFxuICBzbWFydERhdGVWZXJib3NlRm9ybWF0dGVyLFxuICBnZXROdW1iZXJGb3JtYXR0ZXIsXG4gIE51bWJlckZvcm1hdHMsXG4gIENhdGVnb3JpY2FsQ29sb3JOYW1lc3BhY2UsXG59IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcblxuaW1wb3J0ICdudmQzLWZvcmsvYnVpbGQvbnYuZDMuY3NzJztcblxuLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lICovXG5pbXBvcnQgQU5OT1RBVElPTl9UWVBFUywgeyBhcHBseU5hdGl2ZUNvbHVtbnMgfSBmcm9tICcuL3ZlbmRvci9zdXBlcnNldC9Bbm5vdGF0aW9uVHlwZXMnO1xuaW1wb3J0IGlzVHJ1dGh5IGZyb20gJy4vdXRpbHMvaXNUcnV0aHknO1xuaW1wb3J0IHtcbiAgY2xlYW5Db2xvcklucHV0LFxuICBjb21wdXRlQmFyQ2hhcnRXaWR0aCxcbiAgY29tcHV0ZVlEb21haW4sXG4gIGNvbXB1dGVTdGFja2VkWURvbWFpbixcbiAgZHJhd0JhclZhbHVlcyxcbiAgZ2VuZXJhdGVCdWJibGVUb29sdGlwQ29udGVudCxcbiAgZ2VuZXJhdGVDb21wYXJlVG9vbHRpcENvbnRlbnQsXG4gIGdlbmVyYXRlTXVsdGlMaW5lVG9vbHRpcENvbnRlbnQsXG4gIGdlbmVyYXRlUmljaExpbmVUb29sdGlwQ29udGVudCxcbiAgZ2VuZXJhdGVUaW1lUGl2b3RUb29sdGlwLFxuICBnZW5lcmF0ZVRvb2x0aXBDbGFzc05hbWUsXG4gIGdlbmVyYXRlQXJlYUNoYXJ0VG9vbHRpcENvbnRlbnQsXG4gIGdldE1heExhYmVsU2l6ZSxcbiAgZ2V0VGltZU9yTnVtYmVyRm9ybWF0dGVyLFxuICBoaWRlVG9vbHRpcHMsXG4gIHRpcEZhY3RvcnksXG4gIHRyeU51bWlmeSxcbiAgcmVtb3ZlVG9vbHRpcCxcbiAgc2V0QXhpc1Nob3dNYXhNaW4sXG4gIHN0cmluZ2lmeVRpbWVSYW5nZSxcbiAgd3JhcFRvb2x0aXAsXG59IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtcbiAgYW5ub3RhdGlvbkxheWVyVHlwZSxcbiAgYm94UGxvdFZhbHVlVHlwZSxcbiAgYnVsbGV0RGF0YVR5cGUsXG4gIGNhdGVnb3J5QW5kVmFsdWVYWVR5cGUsXG4gIHJnYk9iamVjdFR5cGUsXG4gIG51bWVyaWNYWVR5cGUsXG4gIG51bWJlck9yQXV0b1R5cGUsXG4gIHN0cmluZ09yT2JqZWN0V2l0aExhYmVsVHlwZSxcbn0gZnJvbSAnLi9Qcm9wVHlwZXMnO1xuXG5jb25zdCBOT19EQVRBX1JFTkRFUl9EQVRBID0gW1xuICB7IHRleHQ6ICdObyBkYXRhJywgZHk6ICctLjc1ZW0nLCBjbGFzczogJ2hlYWRlcicgfSxcbiAgeyB0ZXh0OiAnQWRqdXN0IGZpbHRlcnMgb3IgY2hlY2sgdGhlIERhdGFzb3VyY2UuJywgZHk6ICcuNzVlbScsIGNsYXNzOiAnYm9keScgfSxcbl07XG5cbi8vIE92ZXJyaWRlIHRoZSBub0RhdGEgcmVuZGVyIGZ1bmN0aW9uIHRvIG1ha2UgYSBwcmV0dGllciBVWFxuLy8gQ29kZSBhZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL25vdnVzL252ZDMvYmxvYi9tYXN0ZXIvc3JjL3V0aWxzLmpzI0w2NTNcbm52LnV0aWxzLm5vRGF0YSA9IGZ1bmN0aW9uIG5vRGF0YShjaGFydCwgY29udGFpbmVyKSB7XG4gIGNvbnN0IG9wdCA9IGNoYXJ0Lm9wdGlvbnMoKTtcbiAgY29uc3QgbWFyZ2luID0gb3B0Lm1hcmdpbigpO1xuICBjb25zdCBoZWlnaHQgPSBudi51dGlscy5hdmFpbGFibGVIZWlnaHQobnVsbCwgY29udGFpbmVyLCBtYXJnaW4pO1xuICBjb25zdCB3aWR0aCA9IG52LnV0aWxzLmF2YWlsYWJsZVdpZHRoKG51bGwsIGNvbnRhaW5lciwgbWFyZ2luKTtcbiAgY29uc3QgeCA9IG1hcmdpbi5sZWZ0ICsgd2lkdGggLyAyO1xuICBjb25zdCB5ID0gbWFyZ2luLnRvcCArIGhlaWdodCAvIDI7XG5cbiAgLy8gUmVtb3ZlIGFueSBwcmV2aW91c2x5IGNyZWF0ZWQgY2hhcnQgY29tcG9uZW50c1xuICBjb250YWluZXIuc2VsZWN0QWxsKCdnJykucmVtb3ZlKCk7XG5cbiAgY29uc3Qgbm9EYXRhVGV4dCA9IGNvbnRhaW5lci5zZWxlY3RBbGwoJy5udi1ub0RhdGEnKS5kYXRhKE5PX0RBVEFfUkVOREVSX0RBVEEpO1xuXG4gIG5vRGF0YVRleHRcbiAgICAuZW50ZXIoKVxuICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgIC5hdHRyKCdjbGFzcycsIGQgPT4gYG52ZDMgbnYtbm9EYXRhICR7ZC5jbGFzc31gKVxuICAgIC5hdHRyKCdkeScsIGQgPT4gZC5keSlcbiAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpO1xuXG4gIG5vRGF0YVRleHRcbiAgICAuYXR0cigneCcsIHgpXG4gICAgLmF0dHIoJ3knLCB5KVxuICAgIC50ZXh0KGQgPT4gZC50ZXh0KTtcbn07XG5cbmNvbnN0IHsgZ2V0Q29sb3IsIGdldFNjYWxlIH0gPSBDYXRlZ29yaWNhbENvbG9yTmFtZXNwYWNlO1xuXG4vLyBMaW1pdCBvbiBob3cgbGFyZ2UgYXhlcyBtYXJnaW5zIGNhbiBncm93IGFzIHRoZSBjaGFydCB3aW5kb3cgaXMgcmVzaXplZFxuY29uc3QgTUFYX01BUkdJTl9QQUQgPSAzMDtcbmNvbnN0IE1JTl9IRUlHSFRfRk9SX0JSVVNIID0gNDgwO1xuY29uc3QgTUFYX05PX0NIQVJBQ1RFUlNfSU5fTEFCRUwgPSA0MDtcblxuY29uc3QgQlJFQUtQT0lOVFMgPSB7XG4gIHNtYWxsOiAzNDAsXG59O1xuXG5jb25zdCBUSU1FU0VSSUVTX1ZJWl9UWVBFUyA9IFtcbiAgJ2xpbmUnLFxuICAnZHVhbF9saW5lJyxcbiAgJ2xpbmVfbXVsdGknLFxuICAnYXJlYScsXG4gICdjb21wYXJlJyxcbiAgJ2JhcicsXG4gICd0aW1lX3Bpdm90Jyxcbl07XG5cbmNvbnN0IENIQVJUX0lEX1BSRUZJWCA9ICdjaGFydC1pZC0nO1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIGRhdGE6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgIFByb3BUeXBlcy5hcnJheU9mKFxuICAgICAgUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgIC8vIHBpZVxuICAgICAgICBjYXRlZ29yeUFuZFZhbHVlWFlUeXBlLFxuICAgICAgICAvLyBkaXN0LWJhclxuICAgICAgICBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgIGtleTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICB2YWx1ZXM6IFByb3BUeXBlcy5hcnJheU9mKGNhdGVnb3J5QW5kVmFsdWVYWVR5cGUpLFxuICAgICAgICB9KSxcbiAgICAgICAgLy8gYXJlYSwgbGluZSwgY29tcGFyZSwgYmFyXG4gICAgICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAga2V5OiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgICAgICAgICB2YWx1ZXM6IFByb3BUeXBlcy5hcnJheU9mKG51bWVyaWNYWVR5cGUpLFxuICAgICAgICB9KSxcbiAgICAgICAgLy8gZHVhbC1saW5lXG4gICAgICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgY2xhc3NlZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICBrZXk6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICB2YWx1ZXM6IFByb3BUeXBlcy5hcnJheU9mKG51bWVyaWNYWVR5cGUpLFxuICAgICAgICAgIHlBeGlzOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICB9KSxcbiAgICAgICAgLy8gYm94LXBsb3RcbiAgICAgICAgUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICB2YWx1ZXM6IFByb3BUeXBlcy5hcnJheU9mKGJveFBsb3RWYWx1ZVR5cGUpLFxuICAgICAgICB9KSxcbiAgICAgICAgLy8gYnViYmxlXG4gICAgICAgIFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAga2V5OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICAgIHZhbHVlczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLm9iamVjdCksXG4gICAgICAgIH0pLFxuICAgICAgXSksXG4gICAgKSxcbiAgICAvLyBidWxsZXRcbiAgICBidWxsZXREYXRhVHlwZSxcbiAgXSksXG4gIHdpZHRoOiBQcm9wVHlwZXMubnVtYmVyLFxuICBoZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG4gIGFubm90YXRpb25EYXRhOiBQcm9wVHlwZXMub2JqZWN0LFxuICBhbm5vdGF0aW9uTGF5ZXJzOiBQcm9wVHlwZXMuYXJyYXlPZihhbm5vdGF0aW9uTGF5ZXJUeXBlKSxcbiAgYm90dG9tTWFyZ2luOiBudW1iZXJPckF1dG9UeXBlLFxuICBjb2xvclNjaGVtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29tcGFyaXNvblR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNvbnRyaWJ1dGlvbjogUHJvcFR5cGVzLmJvb2wsXG4gIGxlZnRNYXJnaW46IG51bWJlck9yQXV0b1R5cGUsXG4gIG9uRXJyb3I6IFByb3BUeXBlcy5mdW5jLFxuICBzaG93TGVnZW5kOiBQcm9wVHlwZXMuYm9vbCxcbiAgc2hvd01hcmtlcnM6IFByb3BUeXBlcy5ib29sLFxuICB1c2VSaWNoVG9vbHRpcDogUHJvcFR5cGVzLmJvb2wsXG4gIHZpelR5cGU6IFByb3BUeXBlcy5vbmVPZihbXG4gICAgJ2FyZWEnLFxuICAgICdiYXInLFxuICAgICdib3hfcGxvdCcsXG4gICAgJ2J1YmJsZScsXG4gICAgJ2J1bGxldCcsXG4gICAgJ2NvbXBhcmUnLFxuICAgICdjb2x1bW4nLFxuICAgICdkaXN0X2JhcicsXG4gICAgJ2xpbmUnLFxuICAgICdsaW5lX211bHRpJyxcbiAgICAndGltZV9waXZvdCcsXG4gICAgJ3BpZScsXG4gICAgJ2R1YWxfbGluZScsXG4gIF0pLFxuICB4QXhpc0Zvcm1hdDogUHJvcFR5cGVzLnN0cmluZyxcbiAgbnVtYmVyRm9ybWF0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICB4QXhpc0xhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB4QXhpc1Nob3dNaW5NYXg6IFByb3BUeXBlcy5ib29sLFxuICB4SXNMb2dTY2FsZTogUHJvcFR5cGVzLmJvb2wsXG4gIHhUaWNrc0xheW91dDogUHJvcFR5cGVzLm9uZU9mKFsnYXV0bycsICdzdGFnZ2VyZWQnLCAnNDXCsCddKSxcbiAgeUF4aXNGb3JtYXQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHlBeGlzQm91bmRzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubnVtYmVyKSxcbiAgeUF4aXNMYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgeUF4aXNTaG93TWluTWF4OiBQcm9wVHlwZXMuYm9vbCxcbiAgeUlzTG9nU2NhbGU6IFByb3BUeXBlcy5ib29sLFxuICAvLyAnZGlzdC1iYXInIG9ubHlcbiAgb3JkZXJCYXJzOiBQcm9wVHlwZXMuYm9vbCxcbiAgLy8gJ2Jhcicgb3IgJ2Rpc3QtYmFyJ1xuICBpc0JhclN0YWNrZWQ6IFByb3BUeXBlcy5ib29sLFxuICBzaG93QmFyVmFsdWU6IFByb3BUeXBlcy5ib29sLFxuICAvLyAnYmFyJywgJ2Rpc3QtYmFyJyBvciAnY29sdW1uJ1xuICByZWR1Y2VYVGlja3M6IFByb3BUeXBlcy5ib29sLFxuICAvLyAnYmFyJywgJ2Rpc3QtYmFyJyBvciAnYXJlYSdcbiAgc2hvd0NvbnRyb2xzOiBQcm9wVHlwZXMuYm9vbCxcbiAgLy8gJ2xpbmUnIG9ubHlcbiAgc2hvd0JydXNoOiBQcm9wVHlwZXMub25lT2YoW3RydWUsICd5ZXMnLCBmYWxzZSwgJ25vJywgJ2F1dG8nXSksXG4gIG9uQnJ1c2hFbmQ6IFByb3BUeXBlcy5mdW5jLFxuICAvLyAnbGluZS1tdWx0aScgb3IgJ2R1YWwtbGluZSdcbiAgeUF4aXMyRm9ybWF0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAvLyAnbGluZScsICd0aW1lLXBpdm90JywgJ2R1YWwtbGluZScgb3IgJ2xpbmUtbXVsdGknXG4gIGxpbmVJbnRlcnBvbGF0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAvLyAncGllJyBvbmx5XG4gIGlzRG9udXQ6IFByb3BUeXBlcy5ib29sLFxuICBpc1BpZUxhYmVsT3V0c2lkZTogUHJvcFR5cGVzLmJvb2wsXG4gIHBpZUxhYmVsVHlwZTogUHJvcFR5cGVzLm9uZU9mKFtcbiAgICAna2V5JyxcbiAgICAndmFsdWUnLFxuICAgICdwZXJjZW50JyxcbiAgICAna2V5X3ZhbHVlJyxcbiAgICAna2V5X3BlcmNlbnQnLFxuICAgICdrZXlfdmFsdWVfcGVyY2VudCcsXG4gIF0pLFxuICBzaG93TGFiZWxzOiBQcm9wVHlwZXMuYm9vbCxcbiAgLy8gJ2FyZWEnIG9ubHlcbiAgYXJlYVN0YWNrZWRTdHlsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgLy8gJ2J1YmJsZScgb25seVxuICBlbnRpdHk6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG1heEJ1YmJsZVNpemU6IFByb3BUeXBlcy5udW1iZXIsXG4gIHhGaWVsZDogc3RyaW5nT3JPYmplY3RXaXRoTGFiZWxUeXBlLFxuICB5RmllbGQ6IHN0cmluZ09yT2JqZWN0V2l0aExhYmVsVHlwZSxcbiAgc2l6ZUZpZWxkOiBzdHJpbmdPck9iamVjdFdpdGhMYWJlbFR5cGUsXG4gIC8vIHRpbWUtcGl2b3Qgb25seVxuICBiYXNlQ29sb3I6IHJnYk9iamVjdFR5cGUsXG59O1xuXG5jb25zdCBOT09QID0gKCkgPT4ge307XG5jb25zdCBmb3JtYXR0ZXIgPSBnZXROdW1iZXJGb3JtYXR0ZXIoKTtcblxuZnVuY3Rpb24gbnZkM1ZpcyhlbGVtZW50LCBwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGF0YSxcbiAgICB3aWR0aDogbWF4V2lkdGgsXG4gICAgaGVpZ2h0OiBtYXhIZWlnaHQsXG4gICAgYW5ub3RhdGlvbkRhdGEsXG4gICAgYW5ub3RhdGlvbkxheWVycyA9IFtdLFxuICAgIGFyZWFTdGFja2VkU3R5bGUsXG4gICAgYmFzZUNvbG9yLFxuICAgIGJvdHRvbU1hcmdpbixcbiAgICBjb2xvclNjaGVtZSxcbiAgICBjb21wYXJpc29uVHlwZSxcbiAgICBjb250cmlidXRpb24sXG4gICAgZW50aXR5LFxuICAgIGlzQmFyU3RhY2tlZCxcbiAgICBpc0RvbnV0LFxuICAgIGlzUGllTGFiZWxPdXRzaWRlLFxuICAgIGxlZnRNYXJnaW4sXG4gICAgbGluZUludGVycG9sYXRpb24gPSAnbGluZWFyJyxcbiAgICBtYXJrZXJMYWJlbHMsXG4gICAgbWFya2VyTGluZXMsXG4gICAgbWFya2VyTGluZUxhYmVscyxcbiAgICBtYXJrZXJzLFxuICAgIG1heEJ1YmJsZVNpemUsXG4gICAgb25CcnVzaEVuZCA9IE5PT1AsXG4gICAgb25FcnJvciA9IE5PT1AsXG4gICAgb3JkZXJCYXJzLFxuICAgIHBpZUxhYmVsVHlwZSxcbiAgICByYW5nZUxhYmVscyxcbiAgICByYW5nZXMsXG4gICAgcmVkdWNlWFRpY2tzID0gZmFsc2UsXG4gICAgc2hvd0JhclZhbHVlLFxuICAgIHNob3dCcnVzaCxcbiAgICBzaG93Q29udHJvbHMsXG4gICAgc2hvd0xhYmVscyxcbiAgICBzaG93TGVnZW5kLFxuICAgIHNob3dNYXJrZXJzLFxuICAgIHNpemVGaWVsZCxcbiAgICB1c2VSaWNoVG9vbHRpcCxcbiAgICB2aXpUeXBlLFxuICAgIHhBeGlzRm9ybWF0LFxuICAgIG51bWJlckZvcm1hdCxcbiAgICB4QXhpc0xhYmVsLFxuICAgIHhBeGlzU2hvd01pbk1heCA9IGZhbHNlLFxuICAgIHhGaWVsZCxcbiAgICB4SXNMb2dTY2FsZSxcbiAgICB4VGlja3NMYXlvdXQsXG4gICAgeUF4aXNGb3JtYXQsXG4gICAgeUF4aXMyRm9ybWF0LFxuICAgIHlBeGlzQm91bmRzLFxuICAgIHlBeGlzMkJvdW5kcyxcbiAgICB5QXhpc0xhYmVsLFxuICAgIHlBeGlzU2hvd01pbk1heCA9IGZhbHNlLFxuICAgIHlBeGlzMlNob3dNaW5NYXggPSBmYWxzZSxcbiAgICB5RmllbGQsXG4gICAgeUlzTG9nU2NhbGUsXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCBpc0V4cGxvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwbG9yZXItY29udGFpbmVyJykgIT09IG51bGw7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGVsZW1lbnQ7XG4gIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgY29uc3QgYWN0aXZlQW5ub3RhdGlvbkxheWVycyA9IGFubm90YXRpb25MYXllcnMuZmlsdGVyKGxheWVyID0+IGxheWVyLnNob3cpO1xuXG4gIC8vIFNlYXJjaCBmb3IgdGhlIGNoYXJ0IGlkIGluIGEgcGFyZW50IGRpdiBmcm9tIHRoZSBudmQzIGNoYXJ0XG4gIGxldCBjaGFydENvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgbGV0IGNoYXJ0SWQgPSBudWxsO1xuICB3aGlsZSAoY2hhcnRDb250YWluZXIucGFyZW50RWxlbWVudCkge1xuICAgIGlmIChjaGFydENvbnRhaW5lci5wYXJlbnRFbGVtZW50LmlkLnN0YXJ0c1dpdGgoQ0hBUlRfSURfUFJFRklYKSkge1xuICAgICAgY2hhcnRJZCA9IGNoYXJ0Q29udGFpbmVyLnBhcmVudEVsZW1lbnQuaWQ7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjaGFydENvbnRhaW5lciA9IGNoYXJ0Q29udGFpbmVyLnBhcmVudEVsZW1lbnQ7XG4gIH1cblxuICBsZXQgY2hhcnQ7XG4gIGxldCB3aWR0aCA9IG1heFdpZHRoO1xuICBsZXQgY29sb3JLZXkgPSAna2V5JztcblxuICBjb250YWluZXIuc3R5bGUud2lkdGggPSBgJHttYXhXaWR0aH1weGA7XG4gIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHttYXhIZWlnaHR9cHhgO1xuXG4gIGZ1bmN0aW9uIGlzVml6VHlwZXModHlwZXMpIHtcbiAgICByZXR1cm4gdHlwZXMuaW5jbHVkZXModml6VHlwZSk7XG4gIH1cblxuICBjb25zdCBkcmF3R3JhcGggPSBmdW5jdGlvbiBkcmF3R3JhcGgoKSB7XG4gICAgY29uc3QgZDNFbGVtZW50ID0gZDMuc2VsZWN0KGVsZW1lbnQpO1xuICAgIGQzRWxlbWVudC5jbGFzc2VkKCdzdXBlcnNldC1sZWdhY3ktY2hhcnQtbnZkMycsIHRydWUpO1xuICAgIGQzRWxlbWVudC5jbGFzc2VkKGBzdXBlcnNldC1sZWdhY3ktY2hhcnQtbnZkMy0ke2tlYmFiQ2FzZSh2aXpUeXBlKX1gLCB0cnVlKTtcbiAgICBsZXQgc3ZnID0gZDNFbGVtZW50LnNlbGVjdCgnc3ZnJyk7XG4gICAgaWYgKHN2Zy5lbXB0eSgpKSB7XG4gICAgICBzdmcgPSBkM0VsZW1lbnQuYXBwZW5kKCdzdmcnKTtcbiAgICB9XG4gICAgY29uc3QgaGVpZ2h0ID0gdml6VHlwZSA9PT0gJ2J1bGxldCcgPyBNYXRoLm1pbihtYXhIZWlnaHQsIDUwKSA6IG1heEhlaWdodDtcbiAgICBjb25zdCBpc1RpbWVTZXJpZXMgPSBpc1ZpelR5cGVzKFRJTUVTRVJJRVNfVklaX1RZUEVTKTtcblxuICAgIC8vIEhhbmRsaW5nIHhBeGlzIHRpY2tzIHNldHRpbmdzXG4gICAgY29uc3Qgc3RhZ2dlckxhYmVscyA9IHhUaWNrc0xheW91dCA9PT0gJ3N0YWdnZXJlZCc7XG4gICAgY29uc3QgeExhYmVsUm90YXRpb24gPVxuICAgICAgKHhUaWNrc0xheW91dCA9PT0gJ2F1dG8nICYmIGlzVml6VHlwZXMoWydjb2x1bW4nLCAnZGlzdF9iYXInXSkpIHx8IHhUaWNrc0xheW91dCA9PT0gJzQ1wrAnXG4gICAgICAgID8gNDVcbiAgICAgICAgOiAwO1xuICAgIGlmICh4TGFiZWxSb3RhdGlvbiA9PT0gNDUgJiYgaXNUcnV0aHkoc2hvd0JydXNoKSkge1xuICAgICAgb25FcnJvcih0KCdZb3UgY2Fubm90IHVzZSA0NcKwIHRpY2sgbGF5b3V0IGFsb25nIHdpdGggdGhlIHRpbWUgcmFuZ2UgZmlsdGVyJykpO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjYW5TaG93QnJ1c2ggPVxuICAgICAgaXNUcnV0aHkoc2hvd0JydXNoKSB8fFxuICAgICAgKHNob3dCcnVzaCA9PT0gJ2F1dG8nICYmIG1heEhlaWdodCA+PSBNSU5fSEVJR0hUX0ZPUl9CUlVTSCAmJiB4VGlja3NMYXlvdXQgIT09ICc0NcKwJyk7XG4gICAgY29uc3QgbnVtYmVyRm9ybWF0dGVyID0gZ2V0TnVtYmVyRm9ybWF0dGVyKG51bWJlckZvcm1hdCk7XG5cbiAgICBzd2l0Y2ggKHZpelR5cGUpIHtcbiAgICAgIGNhc2UgJ2xpbmUnOlxuICAgICAgICBpZiAoY2FuU2hvd0JydXNoKSB7XG4gICAgICAgICAgY2hhcnQgPSBudi5tb2RlbHMubGluZVdpdGhGb2N1c0NoYXJ0KCk7XG4gICAgICAgICAgaWYgKHN0YWdnZXJMYWJlbHMpIHtcbiAgICAgICAgICAgIC8vIEdpdmUgYSBiaXQgbW9yZSByb29tIHRvIGZvY3VzIGFyZWEgaWYgWCBheGlzIHRpY2tzIGFyZSBzdGFnZ2VyZWRcbiAgICAgICAgICAgIGNoYXJ0LmZvY3VzLm1hcmdpbih7IGJvdHRvbTogNDAgfSk7XG4gICAgICAgICAgICBjaGFydC5mb2N1c0hlaWdodCg4MCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNoYXJ0LmZvY3VzLnhTY2FsZShkMy50aW1lLnNjYWxlLnV0YygpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGFydCA9IG52Lm1vZGVscy5saW5lQ2hhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBjaGFydC54U2NhbGUoZDMudGltZS5zY2FsZS51dGMoKSk7XG4gICAgICAgIGNoYXJ0LmludGVycG9sYXRlKGxpbmVJbnRlcnBvbGF0aW9uKTtcbiAgICAgICAgY2hhcnQuY2xpcEVkZ2UoZmFsc2UpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAndGltZV9waXZvdCc6XG4gICAgICAgIGNoYXJ0ID0gbnYubW9kZWxzLmxpbmVDaGFydCgpO1xuICAgICAgICBjaGFydC54U2NhbGUoZDMudGltZS5zY2FsZS51dGMoKSk7XG4gICAgICAgIGNoYXJ0LmludGVycG9sYXRlKGxpbmVJbnRlcnBvbGF0aW9uKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2R1YWxfbGluZSc6XG4gICAgICBjYXNlICdsaW5lX211bHRpJzpcbiAgICAgICAgY2hhcnQgPSBudi5tb2RlbHMubXVsdGlDaGFydCgpO1xuICAgICAgICBjaGFydC5pbnRlcnBvbGF0ZShsaW5lSW50ZXJwb2xhdGlvbik7XG4gICAgICAgIGNoYXJ0LnhTY2FsZShkMy50aW1lLnNjYWxlLnV0YygpKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2Jhcic6XG4gICAgICAgIGNoYXJ0ID0gbnYubW9kZWxzLm11bHRpQmFyQ2hhcnQoKS5zaG93Q29udHJvbHMoc2hvd0NvbnRyb2xzKS5ncm91cFNwYWNpbmcoMC4xKTtcblxuICAgICAgICBpZiAoIXJlZHVjZVhUaWNrcykge1xuICAgICAgICAgIHdpZHRoID0gY29tcHV0ZUJhckNoYXJ0V2lkdGgoZGF0YSwgaXNCYXJTdGFja2VkLCBtYXhXaWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hhcnQud2lkdGgod2lkdGgpO1xuICAgICAgICBjaGFydC54QXhpcy5zaG93TWF4TWluKGZhbHNlKTtcbiAgICAgICAgY2hhcnQuc3RhY2tlZChpc0JhclN0YWNrZWQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnZGlzdF9iYXInOlxuICAgICAgICBjaGFydCA9IG52Lm1vZGVsc1xuICAgICAgICAgIC5tdWx0aUJhckNoYXJ0KClcbiAgICAgICAgICAuc2hvd0NvbnRyb2xzKHNob3dDb250cm9scylcbiAgICAgICAgICAucmVkdWNlWFRpY2tzKHJlZHVjZVhUaWNrcylcbiAgICAgICAgICAuZ3JvdXBTcGFjaW5nKDAuMSk7IC8vIERpc3RhbmNlIGJldHdlZW4gZWFjaCBncm91cCBvZiBiYXJzLlxuXG4gICAgICAgIGNoYXJ0LnhBeGlzLnNob3dNYXhNaW4oZmFsc2UpO1xuXG4gICAgICAgIGNoYXJ0LnN0YWNrZWQoaXNCYXJTdGFja2VkKTtcbiAgICAgICAgaWYgKG9yZGVyQmFycykge1xuICAgICAgICAgIGRhdGEuZm9yRWFjaChkID0+IHtcbiAgICAgICAgICAgIGQudmFsdWVzLnNvcnQoKGEsIGIpID0+ICh0cnlOdW1pZnkoYS54KSA8IHRyeU51bWlmeShiLngpID8gLTEgOiAxKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZWR1Y2VYVGlja3MpIHtcbiAgICAgICAgICB3aWR0aCA9IGNvbXB1dGVCYXJDaGFydFdpZHRoKGRhdGEsIGlzQmFyU3RhY2tlZCwgbWF4V2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGNoYXJ0LndpZHRoKHdpZHRoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ3BpZSc6XG4gICAgICAgIGNoYXJ0ID0gbnYubW9kZWxzLnBpZUNoYXJ0KCk7XG4gICAgICAgIGNvbG9yS2V5ID0gJ3gnO1xuICAgICAgICBjaGFydC52YWx1ZUZvcm1hdChudW1iZXJGb3JtYXR0ZXIpO1xuICAgICAgICBpZiAoaXNEb251dCkge1xuICAgICAgICAgIGNoYXJ0LmRvbnV0KHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGNoYXJ0LnNob3dMYWJlbHMoc2hvd0xhYmVscyk7XG4gICAgICAgIGNoYXJ0LmxhYmVsc091dHNpZGUoaXNQaWVMYWJlbE91dHNpZGUpO1xuICAgICAgICAvLyBDb25maWd1cmUgdGhlIG1pbmltdW0gc2xpY2Ugc2l6ZSBmb3IgbGFiZWxzIHRvIHNob3cgdXBcbiAgICAgICAgY2hhcnQubGFiZWxUaHJlc2hvbGQoMC4wNSk7XG4gICAgICAgIGNoYXJ0LmNvcm5lclJhZGl1cyh0cnVlKTtcblxuICAgICAgICBpZiAoWydrZXknLCAndmFsdWUnLCAncGVyY2VudCddLmluY2x1ZGVzKHBpZUxhYmVsVHlwZSkpIHtcbiAgICAgICAgICBjaGFydC5sYWJlbFR5cGUocGllTGFiZWxUeXBlKTtcbiAgICAgICAgfSBlbHNlIGlmIChwaWVMYWJlbFR5cGUgPT09ICdrZXlfdmFsdWUnKSB7XG4gICAgICAgICAgY2hhcnQubGFiZWxUeXBlKGQgPT4gYCR7ZC5kYXRhLnh9OiAke251bWJlckZvcm1hdHRlcihkLmRhdGEueSl9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gcGllTGFiZWxUeXBlIGluIFsna2V5X3BlcmNlbnQnLCAna2V5X3ZhbHVlX3BlcmNlbnQnXVxuICAgICAgICAgIGNvbnN0IHRvdGFsID0gZDMuc3VtKGRhdGEsIGQgPT4gZC55KTtcbiAgICAgICAgICBjb25zdCBwZXJjZW50Rm9ybWF0dGVyID0gZ2V0TnVtYmVyRm9ybWF0dGVyKE51bWJlckZvcm1hdHMuUEVSQ0VOVF8yX1BPSU5UKTtcbiAgICAgICAgICBpZiAocGllTGFiZWxUeXBlID09PSAna2V5X3BlcmNlbnQnKSB7XG4gICAgICAgICAgICBjaGFydC50b29sdGlwLnZhbHVlRm9ybWF0dGVyKGQgPT4gcGVyY2VudEZvcm1hdHRlcihkKSk7XG4gICAgICAgICAgICBjaGFydC5sYWJlbFR5cGUoZCA9PiBgJHtkLmRhdGEueH06ICR7cGVyY2VudEZvcm1hdHRlcihkLmRhdGEueSAvIHRvdGFsKX1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcGllTGFiZWxUeXBlID09PSAna2V5X3ZhbHVlX3BlcmNlbnQnXG4gICAgICAgICAgICBjaGFydC50b29sdGlwLnZhbHVlRm9ybWF0dGVyKFxuICAgICAgICAgICAgICBkID0+IGAke251bWJlckZvcm1hdHRlcihkKX0gKCR7cGVyY2VudEZvcm1hdHRlcihkIC8gdG90YWwpfSlgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNoYXJ0LmxhYmVsVHlwZShcbiAgICAgICAgICAgICAgZCA9PlxuICAgICAgICAgICAgICAgIGAke2QuZGF0YS54fTogJHtudW1iZXJGb3JtYXR0ZXIoZC5kYXRhLnkpfSAoJHtwZXJjZW50Rm9ybWF0dGVyKGQuZGF0YS55IC8gdG90YWwpfSlgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGllIGNoYXJ0IGRvZXMgbm90IG5lZWQgdG9wIG1hcmdpblxuICAgICAgICBjaGFydC5tYXJnaW4oeyB0b3A6IDAgfSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdjb2x1bW4nOlxuICAgICAgICBjaGFydCA9IG52Lm1vZGVscy5tdWx0aUJhckNoYXJ0KCkucmVkdWNlWFRpY2tzKGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2NvbXBhcmUnOlxuICAgICAgICBjaGFydCA9IG52Lm1vZGVscy5jdW11bGF0aXZlTGluZUNoYXJ0KCk7XG4gICAgICAgIGNoYXJ0LnhTY2FsZShkMy50aW1lLnNjYWxlLnV0YygpKTtcbiAgICAgICAgY2hhcnQudXNlSW50ZXJhY3RpdmVHdWlkZWxpbmUodHJ1ZSk7XG4gICAgICAgIGNoYXJ0LnhBeGlzLnNob3dNYXhNaW4oZmFsc2UpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYnViYmxlJzpcbiAgICAgICAgY2hhcnQgPSBudi5tb2RlbHMuc2NhdHRlckNoYXJ0KCk7XG4gICAgICAgIGNoYXJ0LnNob3dEaXN0WChmYWxzZSk7XG4gICAgICAgIGNoYXJ0LnNob3dEaXN0WShmYWxzZSk7XG4gICAgICAgIGNoYXJ0LnRvb2x0aXAuY29udGVudEdlbmVyYXRvcihkID0+XG4gICAgICAgICAgZ2VuZXJhdGVCdWJibGVUb29sdGlwQ29udGVudCh7XG4gICAgICAgICAgICBwb2ludDogZC5wb2ludCxcbiAgICAgICAgICAgIGVudGl0eSxcbiAgICAgICAgICAgIHhGaWVsZCxcbiAgICAgICAgICAgIHlGaWVsZCxcbiAgICAgICAgICAgIHNpemVGaWVsZCxcbiAgICAgICAgICAgIHhGb3JtYXR0ZXI6IGdldFRpbWVPck51bWJlckZvcm1hdHRlcih4QXhpc0Zvcm1hdCksXG4gICAgICAgICAgICB5Rm9ybWF0dGVyOiBnZXRUaW1lT3JOdW1iZXJGb3JtYXR0ZXIoeUF4aXNGb3JtYXQpLFxuICAgICAgICAgICAgc2l6ZUZvcm1hdHRlcjogZm9ybWF0dGVyLFxuICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgICAgICBjaGFydC5wb2ludFJhbmdlKFs1LCBtYXhCdWJibGVTaXplICoqIDJdKTtcbiAgICAgICAgY2hhcnQucG9pbnREb21haW4oWzAsIGQzLm1heChkYXRhLCBkID0+IGQzLm1heChkLnZhbHVlcywgdiA9PiB2LnNpemUpKV0pO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnYXJlYSc6XG4gICAgICAgIGNoYXJ0ID0gbnYubW9kZWxzLnN0YWNrZWRBcmVhQ2hhcnQoKTtcbiAgICAgICAgY2hhcnQuc2hvd0NvbnRyb2xzKHNob3dDb250cm9scyk7XG4gICAgICAgIGNoYXJ0LnN0eWxlKGFyZWFTdGFja2VkU3R5bGUpO1xuICAgICAgICBjaGFydC54U2NhbGUoZDMudGltZS5zY2FsZS51dGMoKSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdib3hfcGxvdCc6XG4gICAgICAgIGNvbG9yS2V5ID0gJ2xhYmVsJztcbiAgICAgICAgY2hhcnQgPSBudi5tb2RlbHMuYm94UGxvdENoYXJ0KCk7XG4gICAgICAgIGNoYXJ0LngoZCA9PiBkLmxhYmVsKTtcbiAgICAgICAgY2hhcnQubWF4Qm94V2lkdGgoNzUpOyAvLyBwcmV2ZW50IGJveGVzIGZyb20gYmVpbmcgaW5jcmVkaWJseSB3aWRlXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdidWxsZXQnOlxuICAgICAgICBjaGFydCA9IG52Lm1vZGVscy5idWxsZXRDaGFydCgpO1xuICAgICAgICBkYXRhLnJhbmdlTGFiZWxzID0gcmFuZ2VMYWJlbHM7XG4gICAgICAgIGRhdGEucmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICBkYXRhLm1hcmtlckxhYmVscyA9IG1hcmtlckxhYmVscztcbiAgICAgICAgZGF0YS5tYXJrZXJMaW5lcyA9IG1hcmtlckxpbmVzO1xuICAgICAgICBkYXRhLm1hcmtlckxpbmVMYWJlbHMgPSBtYXJrZXJMaW5lTGFiZWxzO1xuICAgICAgICBkYXRhLm1hcmtlcnMgPSBtYXJrZXJzO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgdmlzdWFsaXphdGlvbiBmb3IgbnZkMyR7dml6VHlwZX1gKTtcbiAgICB9XG4gICAgLy8gQXNzdW1pbmcgdGhlIGNvbnRhaW5lciBoYXMgcGFkZGluZyBhbHJlYWR5IG90aGVyIHRoYW4gZm9yIHRvcCBtYXJnaW5cbiAgICBjaGFydC5tYXJnaW4oeyBsZWZ0OiAwLCBib3R0b206IDAgfSk7XG5cbiAgICBpZiAoc2hvd0JhclZhbHVlKSB7XG4gICAgICBkcmF3QmFyVmFsdWVzKHN2ZywgZGF0YSwgaXNCYXJTdGFja2VkLCB5QXhpc0Zvcm1hdCk7XG4gICAgICBjaGFydC5kaXNwYXRjaC5vbignc3RhdGVDaGFuZ2UuZHJhd0JhclZhbHVlcycsICgpID0+IHtcbiAgICAgICAgZHJhd0JhclZhbHVlcyhzdmcsIGRhdGEsIGlzQmFyU3RhY2tlZCwgeUF4aXNGb3JtYXQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNhblNob3dCcnVzaCAmJiBvbkJydXNoRW5kICE9PSBOT09QKSB7XG4gICAgICBpZiAoY2hhcnQuZm9jdXMpIHtcbiAgICAgICAgY2hhcnQuZm9jdXMuZGlzcGF0Y2gub24oJ2JydXNoJywgZXZlbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IHRpbWVSYW5nZSA9IHN0cmluZ2lmeVRpbWVSYW5nZShldmVudC5leHRlbnQpO1xuICAgICAgICAgIGlmICh0aW1lUmFuZ2UpIHtcbiAgICAgICAgICAgIGV2ZW50LmJydXNoLm9uKCdicnVzaGVuZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgb25CcnVzaEVuZCh0aW1lUmFuZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2hhcnQueEF4aXMgJiYgY2hhcnQueEF4aXMuc3RhZ2dlckxhYmVscykge1xuICAgICAgY2hhcnQueEF4aXMuc3RhZ2dlckxhYmVscyhzdGFnZ2VyTGFiZWxzKTtcbiAgICB9XG4gICAgaWYgKGNoYXJ0LnhBeGlzICYmIGNoYXJ0LnhBeGlzLnJvdGF0ZUxhYmVscykge1xuICAgICAgY2hhcnQueEF4aXMucm90YXRlTGFiZWxzKHhMYWJlbFJvdGF0aW9uKTtcbiAgICB9XG4gICAgaWYgKGNoYXJ0LngyQXhpcyAmJiBjaGFydC54MkF4aXMuc3RhZ2dlckxhYmVscykge1xuICAgICAgY2hhcnQueDJBeGlzLnN0YWdnZXJMYWJlbHMoc3RhZ2dlckxhYmVscyk7XG4gICAgfVxuICAgIGlmIChjaGFydC54MkF4aXMgJiYgY2hhcnQueDJBeGlzLnJvdGF0ZUxhYmVscykge1xuICAgICAgY2hhcnQueDJBeGlzLnJvdGF0ZUxhYmVscyh4TGFiZWxSb3RhdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKCdzaG93TGVnZW5kJyBpbiBjaGFydCAmJiB0eXBlb2Ygc2hvd0xlZ2VuZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh3aWR0aCA8IEJSRUFLUE9JTlRTLnNtYWxsICYmIHZpelR5cGUgIT09ICdwaWUnKSB7XG4gICAgICAgIGNoYXJ0LnNob3dMZWdlbmQoZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhcnQuc2hvd0xlZ2VuZChzaG93TGVnZW5kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoeUlzTG9nU2NhbGUpIHtcbiAgICAgIGNoYXJ0LnlTY2FsZShkMy5zY2FsZS5sb2coKSk7XG4gICAgfVxuICAgIGlmICh4SXNMb2dTY2FsZSkge1xuICAgICAgY2hhcnQueFNjYWxlKGQzLnNjYWxlLmxvZygpKTtcbiAgICB9XG5cbiAgICBsZXQgeEF4aXNGb3JtYXR0ZXI7XG4gICAgaWYgKGlzVGltZVNlcmllcykge1xuICAgICAgeEF4aXNGb3JtYXR0ZXIgPSBnZXRUaW1lRm9ybWF0dGVyKHhBeGlzRm9ybWF0KTtcbiAgICAgIC8vIEluIHRvb2x0aXBzLCBhbHdheXMgdXNlIHRoZSB2ZXJib3NlIHRpbWUgZm9ybWF0XG4gICAgICBjaGFydC5pbnRlcmFjdGl2ZUxheWVyLnRvb2x0aXAuaGVhZGVyRm9ybWF0dGVyKHNtYXJ0RGF0ZVZlcmJvc2VGb3JtYXR0ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB4QXhpc0Zvcm1hdHRlciA9IGdldFRpbWVPck51bWJlckZvcm1hdHRlcih4QXhpc0Zvcm1hdCk7XG4gICAgfVxuICAgIGlmIChjaGFydC54MkF4aXMgJiYgY2hhcnQueDJBeGlzLnRpY2tGb3JtYXQpIHtcbiAgICAgIGNoYXJ0LngyQXhpcy50aWNrRm9ybWF0KHhBeGlzRm9ybWF0dGVyKTtcbiAgICB9XG4gICAgaWYgKGNoYXJ0LnhBeGlzICYmIGNoYXJ0LnhBeGlzLnRpY2tGb3JtYXQpIHtcbiAgICAgIGNvbnN0IGlzWEF4aXNTdHJpbmcgPSBpc1ZpelR5cGVzKFsnZGlzdF9iYXInLCAnYm94X3Bsb3QnXSk7XG4gICAgICBpZiAoaXNYQXhpc1N0cmluZykge1xuICAgICAgICBjaGFydC54QXhpcy50aWNrRm9ybWF0KGQgPT5cbiAgICAgICAgICBkLmxlbmd0aCA+IE1BWF9OT19DSEFSQUNURVJTX0lOX0xBQkVMXG4gICAgICAgICAgICA/IGAke2Quc2xpY2UoMCwgTWF0aC5tYXgoMCwgTUFYX05PX0NIQVJBQ1RFUlNfSU5fTEFCRUwpKX3igKZgXG4gICAgICAgICAgICA6IGQsXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFydC54QXhpcy50aWNrRm9ybWF0KHhBeGlzRm9ybWF0dGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgeUF4aXNGb3JtYXR0ZXIgPSBnZXRUaW1lT3JOdW1iZXJGb3JtYXR0ZXIoeUF4aXNGb3JtYXQpO1xuICAgIGlmIChjaGFydC55QXhpcyAmJiBjaGFydC55QXhpcy50aWNrRm9ybWF0KSB7XG4gICAgICBpZiAoXG4gICAgICAgIChjb250cmlidXRpb24gfHwgY29tcGFyaXNvblR5cGUgPT09ICdwZXJjZW50YWdlJykgJiZcbiAgICAgICAgKCF5QXhpc0Zvcm1hdCB8fFxuICAgICAgICAgIHlBeGlzRm9ybWF0ID09PSBOdW1iZXJGb3JtYXRzLlNNQVJUX05VTUJFUiB8fFxuICAgICAgICAgIHlBeGlzRm9ybWF0ID09PSBOdW1iZXJGb3JtYXRzLlNNQVJUX05VTUJFUl9TSUdORUQpXG4gICAgICApIHtcbiAgICAgICAgLy8gV2hlbiBjb21wdXRpbmcgYSBcIlBlcmNlbnRhZ2VcIiBvciBcIkNvbnRyaWJ1dGlvblwiIHNlbGVjdGVkLFxuICAgICAgICAvLyBmb3JjZSBhIHBlcmNlbnRhZ2UgZm9ybWF0IGlmIG5vIGN1c3RvbSBmb3JtYXR0aW5nIHNldFxuICAgICAgICB5QXhpc0Zvcm1hdHRlciA9IGdldE51bWJlckZvcm1hdHRlcihOdW1iZXJGb3JtYXRzLlBFUkNFTlRfMV9QT0lOVCk7XG4gICAgICB9XG4gICAgICBjaGFydC55QXhpcy50aWNrRm9ybWF0KHlBeGlzRm9ybWF0dGVyKTtcbiAgICB9XG4gICAgaWYgKGNoYXJ0LnkyQXhpcyAmJiBjaGFydC55MkF4aXMudGlja0Zvcm1hdCkge1xuICAgICAgY2hhcnQueTJBeGlzLnRpY2tGb3JtYXQoeUF4aXNGb3JtYXR0ZXIpO1xuICAgIH1cblxuICAgIGlmIChjaGFydC55QXhpcykge1xuICAgICAgY2hhcnQueUF4aXMudGlja3MoNSk7XG4gICAgfVxuICAgIGlmIChjaGFydC55MkF4aXMpIHtcbiAgICAgIGNoYXJ0LnkyQXhpcy50aWNrcyg1KTtcbiAgICB9XG5cbiAgICAvLyBTZXQgc2hvd01heE1pbiBmb3IgYWxsIGF4aXNcbiAgICBzZXRBeGlzU2hvd01heE1pbihjaGFydC54QXhpcywgeEF4aXNTaG93TWluTWF4KTtcbiAgICBzZXRBeGlzU2hvd01heE1pbihjaGFydC54MkF4aXMsIHhBeGlzU2hvd01pbk1heCk7XG4gICAgc2V0QXhpc1Nob3dNYXhNaW4oY2hhcnQueUF4aXMsIHlBeGlzU2hvd01pbk1heCk7XG4gICAgc2V0QXhpc1Nob3dNYXhNaW4oY2hhcnQueTJBeGlzLCB5QXhpczJTaG93TWluTWF4IHx8IHlBeGlzU2hvd01pbk1heCk7XG5cbiAgICBpZiAodml6VHlwZSA9PT0gJ3RpbWVfcGl2b3QnKSB7XG4gICAgICBpZiAoYmFzZUNvbG9yKSB7XG4gICAgICAgIGNvbnN0IHsgciwgZywgYiB9ID0gYmFzZUNvbG9yO1xuICAgICAgICBjaGFydC5jb2xvcihkID0+IHtcbiAgICAgICAgICBjb25zdCBhbHBoYSA9IGQucmFuayA+IDAgPyBkLnBlcmMgKiAwLjUgOiAxO1xuXG4gICAgICAgICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YWxwaGF9KWA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjaGFydC51c2VJbnRlcmFjdGl2ZUd1aWRlbGluZSh0cnVlKTtcbiAgICAgIGNoYXJ0LmludGVyYWN0aXZlTGF5ZXIudG9vbHRpcC5jb250ZW50R2VuZXJhdG9yKGQgPT5cbiAgICAgICAgZ2VuZXJhdGVUaW1lUGl2b3RUb29sdGlwKGQsIHhBeGlzRm9ybWF0dGVyLCB5QXhpc0Zvcm1hdHRlciksXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAodml6VHlwZSAhPT0gJ2J1bGxldCcpIHtcbiAgICAgIGNvbnN0IGNvbG9yRm4gPSBnZXRTY2FsZShjb2xvclNjaGVtZSk7XG4gICAgICBjaGFydC5jb2xvcihkID0+IGQuY29sb3IgfHwgY29sb3JGbihjbGVhbkNvbG9ySW5wdXQoZFtjb2xvcktleV0pKSk7XG4gICAgfVxuXG4gICAgaWYgKGlzVml6VHlwZXMoWydsaW5lJywgJ2FyZWEnXSkgJiYgdXNlUmljaFRvb2x0aXApIHtcbiAgICAgIGNoYXJ0LnVzZUludGVyYWN0aXZlR3VpZGVsaW5lKHRydWUpO1xuICAgICAgaWYgKHZpelR5cGUgPT09ICdsaW5lJykge1xuICAgICAgICBjaGFydC5pbnRlcmFjdGl2ZUxheWVyLnRvb2x0aXAuY29udGVudEdlbmVyYXRvcihkID0+XG4gICAgICAgICAgZ2VuZXJhdGVSaWNoTGluZVRvb2x0aXBDb250ZW50KGQsIHNtYXJ0RGF0ZVZlcmJvc2VGb3JtYXR0ZXIsIHlBeGlzRm9ybWF0dGVyKSxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFyZWEgY2hhcnRcbiAgICAgICAgY2hhcnQuaW50ZXJhY3RpdmVMYXllci50b29sdGlwLmNvbnRlbnRHZW5lcmF0b3IoZCA9PlxuICAgICAgICAgIGdlbmVyYXRlQXJlYUNoYXJ0VG9vbHRpcENvbnRlbnQoZCwgc21hcnREYXRlVmVyYm9zZUZvcm1hdHRlciwgeUF4aXNGb3JtYXR0ZXIsIGNoYXJ0KSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNWaXpUeXBlcyhbJ2NvbXBhcmUnXSkpIHtcbiAgICAgIGNoYXJ0LmludGVyYWN0aXZlTGF5ZXIudG9vbHRpcC5jb250ZW50R2VuZXJhdG9yKGQgPT5cbiAgICAgICAgZ2VuZXJhdGVDb21wYXJlVG9vbHRpcENvbnRlbnQoZCwgeUF4aXNGb3JtYXR0ZXIpLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoaXNWaXpUeXBlcyhbJ2R1YWxfbGluZScsICdsaW5lX211bHRpJ10pKSB7XG4gICAgICBjb25zdCB5QXhpc0Zvcm1hdHRlcjEgPSBnZXROdW1iZXJGb3JtYXR0ZXIoeUF4aXNGb3JtYXQpO1xuICAgICAgY29uc3QgeUF4aXNGb3JtYXR0ZXIyID0gZ2V0TnVtYmVyRm9ybWF0dGVyKHlBeGlzMkZvcm1hdCk7XG4gICAgICBjaGFydC55QXhpczEudGlja0Zvcm1hdCh5QXhpc0Zvcm1hdHRlcjEpO1xuICAgICAgY2hhcnQueUF4aXMyLnRpY2tGb3JtYXQoeUF4aXNGb3JtYXR0ZXIyKTtcbiAgICAgIGNvbnN0IHlBeGlzRm9ybWF0dGVycyA9IGRhdGEubWFwKGRhdHVtID0+XG4gICAgICAgIGRhdHVtLnlBeGlzID09PSAxID8geUF4aXNGb3JtYXR0ZXIxIDogeUF4aXNGb3JtYXR0ZXIyLFxuICAgICAgKTtcbiAgICAgIGNoYXJ0LnVzZUludGVyYWN0aXZlR3VpZGVsaW5lKHRydWUpO1xuICAgICAgY2hhcnQuaW50ZXJhY3RpdmVMYXllci50b29sdGlwLmNvbnRlbnRHZW5lcmF0b3IoZCA9PlxuICAgICAgICBnZW5lcmF0ZU11bHRpTGluZVRvb2x0aXBDb250ZW50KGQsIHhBeGlzRm9ybWF0dGVyLCB5QXhpc0Zvcm1hdHRlcnMpLFxuICAgICAgKTtcbiAgICB9XG4gICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIGNvcnJlY3QgY2hhcnQgZGltZW5zaW9ucyBpZiBhIGNoYXJ0IGlzIHJlbmRlcmVkIGluIGEgaGlkZGVuIGNvbnRhaW5lclxuICAgIGNoYXJ0LndpZHRoKHdpZHRoKTtcbiAgICBjaGFydC5oZWlnaHQoaGVpZ2h0KTtcblxuICAgIHN2Z1xuICAgICAgLmRhdHVtKGRhdGEpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oNTAwKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodClcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoKVxuICAgICAgLmNhbGwoY2hhcnQpO1xuXG4gICAgLy8gRm9yIGxvZyBzY2FsZSwgb25seSBzaG93IDEsIDEwLCAxMDAsIDEwMDAsIC4uLlxuICAgIGlmICh5SXNMb2dTY2FsZSkge1xuICAgICAgY2hhcnQueUF4aXMudGlja0Zvcm1hdChkID0+IChkICE9PSAwICYmIE1hdGgubG9nMTAoZCkgJSAxID09PSAwID8geUF4aXNGb3JtYXR0ZXIoZCkgOiAnJykpO1xuICAgIH1cblxuICAgIGlmICh4TGFiZWxSb3RhdGlvbiA+IDApIHtcbiAgICAgIC8vIHNoaWZ0IGxhYmVscyB0byB0aGUgbGVmdCBzbyB0aGV5IGxvb2sgYmV0dGVyXG4gICAgICBjb25zdCB4VGlja3MgPSBzdmcuc2VsZWN0KCcubnYteC5udi1heGlzID4gZycpLnNlbGVjdEFsbCgnZycpO1xuICAgICAgeFRpY2tzLnNlbGVjdEFsbCgndGV4dCcpLmF0dHIoJ2R4JywgLTYuNSk7XG4gICAgfVxuXG4gICAgY29uc3QgYXBwbHlZQXhpc0JvdW5kcyA9ICgpID0+IHtcbiAgICAgIGlmIChjaGFydC55RG9tYWluICYmIEFycmF5LmlzQXJyYXkoeUF4aXNCb3VuZHMpICYmIHlBeGlzQm91bmRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICBjb25zdCBbY3VzdG9tTWluLCBjdXN0b21NYXhdID0geUF4aXNCb3VuZHM7XG4gICAgICAgIGNvbnN0IGhhc0N1c3RvbU1pbiA9IGlzRGVmaW5lZChjdXN0b21NaW4pICYmICFOdW1iZXIuaXNOYU4oY3VzdG9tTWluKTtcbiAgICAgICAgY29uc3QgaGFzQ3VzdG9tTWF4ID0gaXNEZWZpbmVkKGN1c3RvbU1heCkgJiYgIU51bWJlci5pc05hTihjdXN0b21NYXgpO1xuXG4gICAgICAgIGlmICgoaGFzQ3VzdG9tTWluIHx8IGhhc0N1c3RvbU1heCkgJiYgdml6VHlwZSA9PT0gJ2FyZWEnICYmIGNoYXJ0LnN0eWxlKCkgPT09ICdleHBhbmQnKSB7XG4gICAgICAgICAgLy8gQmVjYXVzZSB0aGVyZSBhcmUgY3VzdG9tIGJvdW5kcywgd2UgbmVlZCB0byBvdmVycmlkZSB0aGVtIGJhY2sgdG8gMCUtMTAwJSBzaW5jZSB0aGlzXG4gICAgICAgICAgLy8gaXMgYW4gZXhwYW5kZWQgYXJlYSBjaGFydFxuICAgICAgICAgIGNoYXJ0LnlEb21haW4oWzAsIDFdKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAoaGFzQ3VzdG9tTWluIHx8IGhhc0N1c3RvbU1heCkgJiZcbiAgICAgICAgICB2aXpUeXBlID09PSAnYXJlYScgJiZcbiAgICAgICAgICBjaGFydC5zdHlsZSgpID09PSAnc3RyZWFtJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBCZWNhdXNlIHRoZXJlIGFyZSBjdXN0b20gYm91bmRzLCB3ZSBuZWVkIHRvIG92ZXJyaWRlIHRoZW0gYmFjayB0byB0aGUgZG9tYWluIG9mIHRoZVxuICAgICAgICAgIC8vIGRhdGEgc2luY2UgdGhpcyBpcyBhIHN0cmVhbSBhcmVhIGNoYXJ0XG4gICAgICAgICAgY2hhcnQueURvbWFpbihjb21wdXRlU3RhY2tlZFlEb21haW4oZGF0YSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGhhc0N1c3RvbU1pbiAmJiBoYXNDdXN0b21NYXgpIHtcbiAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgeSBkb21haW4gaWYgdGhlcmUncyBib3RoIGEgY3VzdG9tIG1pbiBhbmQgbWF4XG4gICAgICAgICAgY2hhcnQueURvbWFpbihbY3VzdG9tTWluLCBjdXN0b21NYXhdKTtcbiAgICAgICAgICBjaGFydC5jbGlwRWRnZSh0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChoYXNDdXN0b21NaW4gfHwgaGFzQ3VzdG9tTWF4KSB7XG4gICAgICAgICAgLy8gT25seSBvbmUgb2YgdGhlIGJvdW5kcyBoYXMgYmVlbiBzZXQsIHNvIHdlIG5lZWQgdG8gbWFudWFsbHkgY2FsY3VsYXRlIHRoZSBvdGhlciBvbmVcbiAgICAgICAgICBsZXQgW3RydWVNaW4sIHRydWVNYXhdID0gWzAsIDFdO1xuXG4gICAgICAgICAgLy8gVGhlc2Ugdml6IHR5cGVzIGNhbiBiZSBzdGFja2VkXG4gICAgICAgICAgLy8gVGhleSBjb3JyZXNwb25kIHRvIHRoZSBudmQzIHN0YWNrZWRBcmVhQ2hhcnQgYW5kIG11bHRpQmFyQ2hhcnRcbiAgICAgICAgICBpZiAodml6VHlwZSA9PT0gJ2FyZWEnIHx8IChpc1ZpelR5cGVzKFsnYmFyJywgJ2Rpc3RfYmFyJ10pICYmIGNoYXJ0LnN0YWNrZWQoKSkpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzdGFja2VkIGFyZWEgY2hhcnQgb3IgYSBzdGFja2VkIGJhciBjaGFydFxuICAgICAgICAgICAgW3RydWVNaW4sIHRydWVNYXhdID0gY29tcHV0ZVN0YWNrZWRZRG9tYWluKGRhdGEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBbdHJ1ZU1pbiwgdHJ1ZU1heF0gPSBjb21wdXRlWURvbWFpbihkYXRhKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBtaW4gPSBoYXNDdXN0b21NaW4gPyBjdXN0b21NaW4gOiB0cnVlTWluO1xuICAgICAgICAgIGNvbnN0IG1heCA9IGhhc0N1c3RvbU1heCA/IGN1c3RvbU1heCA6IHRydWVNYXg7XG4gICAgICAgICAgY2hhcnQueURvbWFpbihbbWluLCBtYXhdKTtcbiAgICAgICAgICBjaGFydC5jbGlwRWRnZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgYXBwbHlZQXhpc0JvdW5kcygpO1xuXG4gICAgLy8gQWxzbyByZWFwcGx5IG9uIGVhY2ggc3RhdGUgY2hhbmdlIHRvIGFjY291bnQgZm9yIGVuYWJsZWQvZGlzYWJsZWQgc2VyaWVzXG4gICAgaWYgKGNoYXJ0LmRpc3BhdGNoICYmIGNoYXJ0LmRpc3BhdGNoLnN0YXRlQ2hhbmdlKSB7XG4gICAgICBjaGFydC5kaXNwYXRjaC5vbignc3RhdGVDaGFuZ2UuYXBwbHlZQXhpc0JvdW5kcycsIGFwcGx5WUF4aXNCb3VuZHMpO1xuICAgIH1cblxuICAgIC8vIGFsaWduIHlBeGlzMSBhbmQgeUF4aXMyIHRpY2tzXG4gICAgaWYgKGlzVml6VHlwZXMoWydkdWFsX2xpbmUnLCAnbGluZV9tdWx0aSddKSkge1xuICAgICAgY29uc3QgY291bnQgPSBjaGFydC55QXhpczEudGlja3MoKTtcbiAgICAgIGNvbnN0IHRpY2tzMSA9IGNoYXJ0LnlBeGlzMS5zY2FsZSgpLmRvbWFpbihjaGFydC55QXhpczEuZG9tYWluKCkpLm5pY2UoY291bnQpLnRpY2tzKGNvdW50KTtcbiAgICAgIGNvbnN0IHRpY2tzMiA9IGNoYXJ0LnlBeGlzMi5zY2FsZSgpLmRvbWFpbihjaGFydC55QXhpczIuZG9tYWluKCkpLm5pY2UoY291bnQpLnRpY2tzKGNvdW50KTtcblxuICAgICAgLy8gbWF0Y2ggbnVtYmVyIG9mIHRpY2tzIGluIGJvdGggYXhlc1xuICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IHRpY2tzMS5sZW5ndGggLSB0aWNrczIubGVuZ3RoO1xuICAgICAgaWYgKHRpY2tzMS5sZW5ndGggPiAwICYmIHRpY2tzMi5sZW5ndGggPiAwICYmIGRpZmZlcmVuY2UgIT09IDApIHtcbiAgICAgICAgY29uc3Qgc21hbGxlc3QgPSBkaWZmZXJlbmNlIDwgMCA/IHRpY2tzMSA6IHRpY2tzMjtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBzbWFsbGVzdFsxXSAtIHNtYWxsZXN0WzBdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguYWJzKGRpZmZlcmVuY2UpOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoaSAlIDIgPT09IDApIHtcbiAgICAgICAgICAgIHNtYWxsZXN0LnVuc2hpZnQoc21hbGxlc3RbMF0gLSBkZWx0YSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNtYWxsZXN0LnB1c2goc21hbGxlc3Rbc21hbGxlc3QubGVuZ3RoIC0gMV0gKyBkZWx0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNoYXJ0LnlEb21haW4xKFt0aWNrczFbMF0sIHRpY2tzMVt0aWNrczEubGVuZ3RoIC0gMV1dKTtcbiAgICAgICAgY2hhcnQueURvbWFpbjIoW3RpY2tzMlswXSwgdGlja3MyW3RpY2tzMi5sZW5ndGggLSAxXV0pO1xuICAgICAgICBjaGFydC55QXhpczEudGlja1ZhbHVlcyh0aWNrczEpO1xuICAgICAgICBjaGFydC55QXhpczIudGlja1ZhbHVlcyh0aWNrczIpO1xuICAgICAgfVxuXG4gICAgICBjaGFydC55RG9tYWluMShbeUF4aXNCb3VuZHNbMF0gfHwgdGlja3MxWzBdLCB5QXhpc0JvdW5kc1sxXSB8fCB0aWNrczFbdGlja3MxLmxlbmd0aCAtIDFdXSk7XG4gICAgICBjaGFydC55RG9tYWluMihbeUF4aXMyQm91bmRzWzBdIHx8IHRpY2tzMlswXSwgeUF4aXMyQm91bmRzWzFdIHx8IHRpY2tzMlt0aWNrczIubGVuZ3RoIC0gMV1dKTtcbiAgICB9XG5cbiAgICBpZiAoc2hvd01hcmtlcnMpIHtcbiAgICAgIHN2Zy5zZWxlY3RBbGwoJy5udi1wb2ludCcpLnN0eWxlKCdzdHJva2Utb3BhY2l0eScsIDEpLnN0eWxlKCdmaWxsLW9wYWNpdHknLCAxKTtcblxuICAgICAgLy8gcmVkbyBvbiBsZWdlbmQgdG9nZ2xlOyBudmQzIGNhbGxzIHRoZSBjYWxsYmFjayAqYmVmb3JlKiB0aGUgbGluZSBpc1xuICAgICAgLy8gZHJhd24sIHNvIHdlIG5lZWQgdG8gYWRkIGEgc21hbGwgZGVsYXkgaGVyZVxuICAgICAgY2hhcnQuZGlzcGF0Y2gub24oJ3N0YXRlQ2hhbmdlLnNob3dNYXJrZXJzJywgKCkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcubnYtcG9pbnQnKS5zdHlsZSgnc3Ryb2tlLW9wYWNpdHknLCAxKS5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMSk7XG4gICAgICAgIH0sIDEwKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjaGFydC55QXhpcyAhPT0gdW5kZWZpbmVkIHx8IGNoYXJ0LnlBeGlzMiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBIYWNrIHRvIGFkanVzdCB5IGF4aXMgbGVmdCBtYXJnaW4gdG8gYWNjb21tb2RhdGUgbG9uZyBudW1iZXJzXG4gICAgICBjb25zdCBtYXJnaW5QYWQgPSBNYXRoLmNlaWwoTWF0aC5taW4obWF4V2lkdGggKiAoaXNFeHBsb3JlID8gMC4wMSA6IDAuMDMpLCBNQVhfTUFSR0lOX1BBRCkpO1xuICAgICAgLy8gSGFjayB0byBhZGp1c3QgbWFyZ2lucyB0byBhY2NvbW1vZGF0ZSBsb25nIGF4aXMgdGljayBsYWJlbHMuXG4gICAgICAvLyAtIGhhcyB0byBiZSBkb25lIG9ubHkgYWZ0ZXIgdGhlIGNoYXJ0IGhhcyBiZWVuIHJlbmRlcmVkIG9uY2VcbiAgICAgIC8vIC0gbWVhc3VyZSB0aGUgd2lkdGggb3IgaGVpZ2h0IG9mIHRoZSBsYWJlbHNcbiAgICAgIC8vIC0tLS0gKHggYXhpcyBsYWJlbHMgYXJlIHJvdGF0ZWQgNDUgZGVncmVlcyBzbyB3ZSB1c2UgaGVpZ2h0KSxcbiAgICAgIC8vIC0gYWRqdXN0IG1hcmdpbnMgYmFzZWQgb24gdGhlc2UgbWVhc3VyZXMgYW5kIHJlbmRlciBhZ2FpblxuICAgICAgY29uc3QgbWFyZ2lucyA9IGNoYXJ0Lm1hcmdpbigpO1xuICAgICAgaWYgKGNoYXJ0LnhBeGlzKSB7XG4gICAgICAgIG1hcmdpbnMuYm90dG9tID0gMjg7XG4gICAgICB9XG4gICAgICBjb25zdCBtYXhZQXhpc0xhYmVsV2lkdGggPSBnZXRNYXhMYWJlbFNpemUoc3ZnLCBjaGFydC55QXhpczIgPyAnbnYteTEnIDogJ252LXknKTtcbiAgICAgIGNvbnN0IG1heFhBeGlzTGFiZWxIZWlnaHQgPSBnZXRNYXhMYWJlbFNpemUoc3ZnLCAnbnYteCcpO1xuICAgICAgbWFyZ2lucy5sZWZ0ID0gbWF4WUF4aXNMYWJlbFdpZHRoICsgbWFyZ2luUGFkO1xuXG4gICAgICBpZiAoeUF4aXNMYWJlbCAmJiB5QXhpc0xhYmVsICE9PSAnJykge1xuICAgICAgICBtYXJnaW5zLmxlZnQgKz0gMjU7XG4gICAgICB9XG4gICAgICBpZiAoc2hvd0JhclZhbHVlKSB7XG4gICAgICAgIC8vIEFkZCBtb3JlIG1hcmdpbiB0byBhdm9pZCBsYWJlbCBjb2xsaWRpbmcgd2l0aCBsZWdlbmQuXG4gICAgICAgIG1hcmdpbnMudG9wICs9IDI0O1xuICAgICAgfVxuICAgICAgaWYgKHhBeGlzU2hvd01pbk1heCkge1xuICAgICAgICAvLyBJZiB4IGJvdW5kcyBhcmUgc2hvd24sIHdlIG5lZWQgYSByaWdodCBtYXJnaW5cbiAgICAgICAgbWFyZ2lucy5yaWdodCA9IE1hdGgubWF4KDIwLCBtYXhYQXhpc0xhYmVsSGVpZ2h0IC8gMikgKyBtYXJnaW5QYWQ7XG4gICAgICB9XG4gICAgICBpZiAoeExhYmVsUm90YXRpb24gPT09IDQ1KSB7XG4gICAgICAgIG1hcmdpbnMuYm90dG9tID1cbiAgICAgICAgICBtYXhYQXhpc0xhYmVsSGVpZ2h0ICogTWF0aC5zaW4oKE1hdGguUEkgKiB4TGFiZWxSb3RhdGlvbikgLyAxODApICsgbWFyZ2luUGFkICsgMzA7XG4gICAgICAgIG1hcmdpbnMucmlnaHQgPVxuICAgICAgICAgIG1heFhBeGlzTGFiZWxIZWlnaHQgKiBNYXRoLmNvcygoTWF0aC5QSSAqIHhMYWJlbFJvdGF0aW9uKSAvIDE4MCkgKyBtYXJnaW5QYWQ7XG4gICAgICB9IGVsc2UgaWYgKHN0YWdnZXJMYWJlbHMpIHtcbiAgICAgICAgbWFyZ2lucy5ib3R0b20gPSA0MDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzVml6VHlwZXMoWydkdWFsX2xpbmUnLCAnbGluZV9tdWx0aSddKSkge1xuICAgICAgICBjb25zdCBtYXhZQXhpczJMYWJlbFdpZHRoID0gZ2V0TWF4TGFiZWxTaXplKHN2ZywgJ252LXkyJyk7XG4gICAgICAgIG1hcmdpbnMucmlnaHQgPSBtYXhZQXhpczJMYWJlbFdpZHRoICsgbWFyZ2luUGFkO1xuICAgICAgfVxuICAgICAgaWYgKGJvdHRvbU1hcmdpbiAmJiBib3R0b21NYXJnaW4gIT09ICdhdXRvJykge1xuICAgICAgICBtYXJnaW5zLmJvdHRvbSA9IHBhcnNlSW50KGJvdHRvbU1hcmdpbiwgMTApO1xuICAgICAgfVxuICAgICAgaWYgKGxlZnRNYXJnaW4gJiYgbGVmdE1hcmdpbiAhPT0gJ2F1dG8nKSB7XG4gICAgICAgIG1hcmdpbnMubGVmdCA9IGxlZnRNYXJnaW47XG4gICAgICB9XG5cbiAgICAgIGlmICh4QXhpc0xhYmVsICYmIHhBeGlzTGFiZWwgIT09ICcnICYmIGNoYXJ0LnhBeGlzKSB7XG4gICAgICAgIG1hcmdpbnMuYm90dG9tICs9IDI1O1xuICAgICAgICBsZXQgZGlzdGFuY2UgPSAwO1xuICAgICAgICBpZiAobWFyZ2lucy5ib3R0b20gJiYgIU51bWJlci5pc05hTihtYXJnaW5zLmJvdHRvbSkpIHtcbiAgICAgICAgICBkaXN0YW5jZSA9IG1hcmdpbnMuYm90dG9tIC0gNDU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbnZkMyBidWcgYXhpc0xhYmVsRGlzdGFuY2UgaXMgZGlzcmVnYXJkZWQgb24geEF4aXNcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2tyaXNwby9hbmd1bGFyLW52ZDMvaXNzdWVzLzkwXG4gICAgICAgIGNoYXJ0LnhBeGlzLmF4aXNMYWJlbCh4QXhpc0xhYmVsKS5heGlzTGFiZWxEaXN0YW5jZShkaXN0YW5jZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh5QXhpc0xhYmVsICYmIHlBeGlzTGFiZWwgIT09ICcnICYmIGNoYXJ0LnlBeGlzKSB7XG4gICAgICAgIGxldCBkaXN0YW5jZSA9IDA7XG4gICAgICAgIGlmIChtYXJnaW5zLmxlZnQgJiYgIU51bWJlci5pc05hTihtYXJnaW5zLmxlZnQpKSB7XG4gICAgICAgICAgZGlzdGFuY2UgPSBtYXJnaW5zLmxlZnQgLSA3MDtcbiAgICAgICAgfVxuICAgICAgICBjaGFydC55QXhpcy5heGlzTGFiZWwoeUF4aXNMYWJlbCkuYXhpc0xhYmVsRGlzdGFuY2UoZGlzdGFuY2UpO1xuICAgICAgfVxuICAgICAgaWYgKGlzVGltZVNlcmllcyAmJiBhbm5vdGF0aW9uRGF0YSAmJiBhY3RpdmVBbm5vdGF0aW9uTGF5ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gVGltZSBzZXJpZXMgYW5ub3RhdGlvbnMgYWRkIGFkZGl0aW9uYWwgZGF0YVxuICAgICAgICBjb25zdCB0aW1lU2VyaWVzQW5ub3RhdGlvbnMgPSBhY3RpdmVBbm5vdGF0aW9uTGF5ZXJzXG4gICAgICAgICAgLmZpbHRlcihsYXllciA9PiBsYXllci5hbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5USU1FX1NFUklFUylcbiAgICAgICAgICAucmVkdWNlKFxuICAgICAgICAgICAgKGJ1c2hlbCwgYSkgPT5cbiAgICAgICAgICAgICAgYnVzaGVsLmNvbmNhdChcbiAgICAgICAgICAgICAgICAoYW5ub3RhdGlvbkRhdGFbYS5uYW1lXSB8fCBbXSkubWFwKHNlcmllcyA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXNlcmllcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBBcnJheS5pc0FycmF5KHNlcmllcy5rZXkpXG4gICAgICAgICAgICAgICAgICAgID8gYCR7YS5uYW1lfSwgJHtzZXJpZXMua2V5LmpvaW4oJywgJyl9YFxuICAgICAgICAgICAgICAgICAgICA6IGAke2EubmFtZX0sICR7c2VyaWVzLmtleX1gO1xuXG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5zZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGEuY29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBhLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc2VkOiBgJHthLm9wYWNpdHl9ICR7YS5zdHlsZX0gbnYtdGltZXNlcmllcy1hbm5vdGF0aW9uLWxheWVyIHNob3dNYXJrZXJzJHthLnNob3dNYXJrZXJzfSBoaWRlTGluZSR7YS5oaWRlTGluZX1gLFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICk7XG4gICAgICAgIGRhdGEucHVzaCguLi50aW1lU2VyaWVzQW5ub3RhdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBVbmlxdWVseSBpZGVudGlmeSB0b29sdGlwcyBiYXNlZCBvbiBjaGFydElkIHNvIHRoaXMgY2hhcnQgaW5zdGFuY2Ugb25seVxuICAgICAgLy8gY29udHJvbHMgaXRzIG93biB0b29sdGlwc1xuICAgICAgaWYgKGNoYXJ0SWQpIHtcbiAgICAgICAgaWYgKGNoYXJ0ICYmIGNoYXJ0LmludGVyYWN0aXZlTGF5ZXIgJiYgY2hhcnQuaW50ZXJhY3RpdmVMYXllci50b29sdGlwKSB7XG4gICAgICAgICAgY2hhcnQuaW50ZXJhY3RpdmVMYXllci50b29sdGlwLmNsYXNzZXMoW2dlbmVyYXRlVG9vbHRpcENsYXNzTmFtZShjaGFydElkKV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYXJ0ICYmIGNoYXJ0LnRvb2x0aXApIHtcbiAgICAgICAgICBjaGFydC50b29sdGlwLmNsYXNzZXMoW2dlbmVyYXRlVG9vbHRpcENsYXNzTmFtZShjaGFydElkKV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHJlbmRlciBjaGFydFxuICAgICAgY2hhcnQubWFyZ2luKG1hcmdpbnMpO1xuICAgICAgc3ZnXG4gICAgICAgIC5kYXR1bShkYXRhKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbig1MDApXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxuICAgICAgICAuY2FsbChjaGFydCk7XG5cbiAgICAgIC8vIE9uIHNjcm9sbCwgaGlkZSAobm90IHJlbW92ZSkgdG9vbHRpcHMgc28gdGhleSBjYW4gcmVhcHBlYXIgb24gaG92ZXIuXG4gICAgICAvLyBUaHJvdHRsZSB0byBvbmx5IDR4L3NlY29uZC5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnc2Nyb2xsJyxcbiAgICAgICAgdGhyb3R0bGUoKCkgPT4gaGlkZVRvb2x0aXBzKGZhbHNlKSwgMjUwKSxcbiAgICAgICk7XG5cbiAgICAgIC8vIFRoZSBiZWxvdyBjb2RlIHNob3VsZCBiZSBydW4gQUZURVIgcmVuZGVyaW5nIGJlY2F1c2UgY2hhcnQgaXMgdXBkYXRlZCBpbiBjYWxsKClcbiAgICAgIGlmIChpc1RpbWVTZXJpZXMgJiYgYWN0aXZlQW5ub3RhdGlvbkxheWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIEZvcm11bGEgYW5ub3RhdGlvbnNcbiAgICAgICAgY29uc3QgZm9ybXVsYXMgPSBhY3RpdmVBbm5vdGF0aW9uTGF5ZXJzXG4gICAgICAgICAgLmZpbHRlcihhID0+IGEuYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQSlcbiAgICAgICAgICAubWFwKGEgPT4gKHsgLi4uYSwgZm9ybXVsYTogbWF0aGpzUGFyc2UoYS52YWx1ZSkgfSkpO1xuXG4gICAgICAgIGxldCB4TWF4O1xuICAgICAgICBsZXQgeE1pbjtcbiAgICAgICAgbGV0IHhTY2FsZTtcbiAgICAgICAgaWYgKHZpelR5cGUgPT09ICdiYXInKSB7XG4gICAgICAgICAgeE1pbiA9IGQzLm1pbihkYXRhWzBdLnZhbHVlcywgZCA9PiBkLngpO1xuICAgICAgICAgIHhNYXggPSBkMy5tYXgoZGF0YVswXS52YWx1ZXMsIGQgPT4gZC54KTtcbiAgICAgICAgICB4U2NhbGUgPSBkMy5zY2FsZS5xdWFudGlsZSgpLmRvbWFpbihbeE1pbiwgeE1heF0pLnJhbmdlKGNoYXJ0LnhBeGlzLnJhbmdlKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHhNaW4gPSBjaGFydC54QXhpcy5zY2FsZSgpLmRvbWFpbigpWzBdLnZhbHVlT2YoKTtcbiAgICAgICAgICB4TWF4ID0gY2hhcnQueEF4aXMuc2NhbGUoKS5kb21haW4oKVsxXS52YWx1ZU9mKCk7XG4gICAgICAgICAgaWYgKGNoYXJ0LnhTY2FsZSkge1xuICAgICAgICAgICAgeFNjYWxlID0gY2hhcnQueFNjYWxlKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjaGFydC54QXhpcy5zY2FsZSkge1xuICAgICAgICAgICAgeFNjYWxlID0gY2hhcnQueEF4aXMuc2NhbGUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeFNjYWxlID0gZDMuc2NhbGUubGluZWFyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh4U2NhbGUgJiYgeFNjYWxlLmNsYW1wKSB7XG4gICAgICAgICAgeFNjYWxlLmNsYW1wKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcm11bGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCB4VmFsdWVzID0gW107XG4gICAgICAgICAgaWYgKHZpelR5cGUgPT09ICdiYXInKSB7XG4gICAgICAgICAgICAvLyBGb3IgYmFyLWNoYXJ0cyB3ZSB3YW50IG9uZSBkYXRhIHBvaW50IGV2YWx1YXRlZCBmb3IgZXZlcnlcbiAgICAgICAgICAgIC8vIGRhdGEgcG9pbnQgdGhhdCB3aWxsIGJlIGRpc3BsYXllZC5cbiAgICAgICAgICAgIGNvbnN0IGRpc3RpbmN0ID0gZGF0YS5yZWR1Y2UoKHhWYWxzLCBkKSA9PiB7XG4gICAgICAgICAgICAgIGQudmFsdWVzLmZvckVhY2goeCA9PiB4VmFscy5hZGQoeC54KSk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHhWYWxzO1xuICAgICAgICAgICAgfSwgbmV3IFNldCgpKTtcbiAgICAgICAgICAgIHhWYWx1ZXMucHVzaCguLi5kaXN0aW5jdC52YWx1ZXMoKSk7XG4gICAgICAgICAgICB4VmFsdWVzLnNvcnQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIGV2ZXJ5IG90aGVyIHRpbWUgdmlzdWFsaXphdGlvbiBpdCBzaG91bGQgYmUgb2ssIHRvIGhhdmUgYVxuICAgICAgICAgICAgLy8gZGF0YSBwb2ludHMgaW4gZXZlbiBpbnRlcnZhbHMuXG4gICAgICAgICAgICBsZXQgcGVyaW9kID0gTWF0aC5taW4oXG4gICAgICAgICAgICAgIC4uLmRhdGEubWFwKGQgPT4gTWF0aC5taW4oLi4uZC52YWx1ZXMuc2xpY2UoMSkubWFwKCh2LCBpKSA9PiB2LnggLSBkLnZhbHVlc1tpXS54KSkpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFQb2ludHMgPSAoeE1heCAtIHhNaW4pIC8gKHBlcmlvZCB8fCAxKTtcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZXJlIGFyZSBlbm91Z2ggZGF0YSBwb2ludHMgYW5kIG5vdCB0b28gbWFueVxuICAgICAgICAgICAgcGVyaW9kID0gZGF0YVBvaW50cyA8IDEwMCA/ICh4TWF4IC0geE1pbikgLyAxMDAgOiBwZXJpb2Q7XG4gICAgICAgICAgICBwZXJpb2QgPSBkYXRhUG9pbnRzID4gNTAwID8gKHhNYXggLSB4TWluKSAvIDUwMCA6IHBlcmlvZDtcbiAgICAgICAgICAgIHhWYWx1ZXMucHVzaCh4TWluKTtcbiAgICAgICAgICAgIGZvciAobGV0IHggPSB4TWluOyB4IDwgeE1heDsgeCArPSBwZXJpb2QpIHtcbiAgICAgICAgICAgICAgeFZhbHVlcy5wdXNoKHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeFZhbHVlcy5wdXNoKHhNYXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBmb3JtdWxhRGF0YSA9IGZvcm11bGFzLm1hcChmbyA9PiAoe1xuICAgICAgICAgICAga2V5OiBmby5uYW1lLFxuICAgICAgICAgICAgdmFsdWVzOiB4VmFsdWVzLm1hcCh4ID0+ICh7IHk6IGZvLmZvcm11bGEuZXZhbHVhdGUoeyB4IH0pLCB4IH0pKSxcbiAgICAgICAgICAgIGNvbG9yOiBmby5jb2xvcixcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBmby53aWR0aCxcbiAgICAgICAgICAgIGNsYXNzZWQ6IGAke2ZvLm9wYWNpdHl9ICR7Zm8uc3R5bGV9YCxcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgZGF0YS5wdXNoKC4uLmZvcm11bGFEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB4QXhpcyA9IGNoYXJ0LnhBeGlzMSA/IGNoYXJ0LnhBeGlzMSA6IGNoYXJ0LnhBeGlzO1xuICAgICAgICBjb25zdCB5QXhpcyA9IGNoYXJ0LnlBeGlzMSA/IGNoYXJ0LnlBeGlzMSA6IGNoYXJ0LnlBeGlzO1xuICAgICAgICBjb25zdCBjaGFydFdpZHRoID0geEF4aXMuc2NhbGUoKS5yYW5nZSgpWzFdO1xuICAgICAgICBjb25zdCBhbm5vdGF0aW9uSGVpZ2h0ID0geUF4aXMuc2NhbGUoKS5yYW5nZSgpWzBdO1xuXG4gICAgICAgIGlmIChhbm5vdGF0aW9uRGF0YSkge1xuICAgICAgICAgIC8vIEV2ZW50IGFubm90YXRpb25zXG4gICAgICAgICAgYWN0aXZlQW5ub3RhdGlvbkxheWVyc1xuICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgeCA9PlxuICAgICAgICAgICAgICAgIHguYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRVZFTlQgJiZcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uRGF0YSAmJlxuICAgICAgICAgICAgICAgIGFubm90YXRpb25EYXRhW3gubmFtZV0sXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuZm9yRWFjaCgoY29uZmlnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlID0gYXBwbHlOYXRpdmVDb2x1bW5zKGNvbmZpZyk7XG4gICAgICAgICAgICAgIC8vIEFkZCBldmVudCBhbm5vdGF0aW9uIGxheWVyXG4gICAgICAgICAgICAgIGNvbnN0IGFubm90YXRpb25zID0gZDNcbiAgICAgICAgICAgICAgICAuc2VsZWN0KGVsZW1lbnQpXG4gICAgICAgICAgICAgICAgLnNlbGVjdCgnLm52LXdyYXAnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGBudi1ldmVudC1hbm5vdGF0aW9uLWxheWVyLSR7aW5kZXh9YCk7XG4gICAgICAgICAgICAgIGNvbnN0IGFDb2xvciA9IGUuY29sb3IgfHwgZ2V0Q29sb3IoY2xlYW5Db2xvcklucHV0KGUubmFtZSksIGNvbG9yU2NoZW1lKTtcblxuICAgICAgICAgICAgICBjb25zdCB0aXAgPSB0aXBGYWN0b3J5KHtcbiAgICAgICAgICAgICAgICAuLi5lLFxuICAgICAgICAgICAgICAgIGFubm90YXRpb25UaXBDbGFzczogYGFycm93LWRvd24gbnYtZXZlbnQtYW5ub3RhdGlvbi1sYXllci0ke2NvbmZpZy5zb3VyY2VUeXBlfWAsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBjb25zdCByZWNvcmRzID0gKGFubm90YXRpb25EYXRhW2UubmFtZV0ucmVjb3JkcyB8fCBbXSlcbiAgICAgICAgICAgICAgICAubWFwKHIgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdGltZVZhbHVlID0gbmV3IERhdGUobW9tZW50LnV0YyhyW2UudGltZUNvbHVtbl0pKTtcblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgICAgICAgICAgW2UudGltZUNvbHVtbl06IHRpbWVWYWx1ZSxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHJlY29yZCA9PiAhTnVtYmVyLmlzTmFOKHJlY29yZFtlLnRpbWVDb2x1bW5dLmdldE1pbGxpc2Vjb25kcygpKSk7XG5cbiAgICAgICAgICAgICAgaWYgKHJlY29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGFubm90YXRpb25zXG4gICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdsaW5lJylcbiAgICAgICAgICAgICAgICAgIC5kYXRhKHJlY29yZHMpXG4gICAgICAgICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgIHgxOiBkID0+IHhTY2FsZShuZXcgRGF0ZShkW2UudGltZUNvbHVtbl0pKSxcbiAgICAgICAgICAgICAgICAgICAgeTE6IDAsXG4gICAgICAgICAgICAgICAgICAgIHgyOiBkID0+IHhTY2FsZShuZXcgRGF0ZShkW2UudGltZUNvbHVtbl0pKSxcbiAgICAgICAgICAgICAgICAgICAgeTI6IGFubm90YXRpb25IZWlnaHQsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgYCR7ZS5vcGFjaXR5fSAke2Uuc3R5bGV9YClcbiAgICAgICAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgYUNvbG9yKVxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBlLndpZHRoKVxuICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCB0aXAuc2hvdylcbiAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCB0aXAuaGlkZSlcbiAgICAgICAgICAgICAgICAgIC5jYWxsKHRpcCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyB1cGRhdGUgYW5ub3RhdGlvbiBwb3NpdGlvbnMgb24gYnJ1c2ggZXZlbnRcbiAgICAgICAgICAgICAgaWYgKGNoYXJ0LmZvY3VzKSB7XG4gICAgICAgICAgICAgICAgY2hhcnQuZm9jdXMuZGlzcGF0Y2gub24oJ29uQnJ1c2guZXZlbnQtYW5ub3RhdGlvbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGFubm90YXRpb25zXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ2xpbmUnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShyZWNvcmRzKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgeDE6IGQgPT4geFNjYWxlKG5ldyBEYXRlKGRbZS50aW1lQ29sdW1uXSkpLFxuICAgICAgICAgICAgICAgICAgICAgIHkxOiAwLFxuICAgICAgICAgICAgICAgICAgICAgIHgyOiBkID0+IHhTY2FsZShuZXcgRGF0ZShkW2UudGltZUNvbHVtbl0pKSxcbiAgICAgICAgICAgICAgICAgICAgICB5MjogYW5ub3RhdGlvbkhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSB4U2NhbGUobmV3IERhdGUoZFtlLnRpbWVDb2x1bW5dKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4ID4gMCAmJiB4IDwgY2hhcnRXaWR0aCA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIEludGVydmFsIGFubm90YXRpb25zXG4gICAgICAgICAgYWN0aXZlQW5ub3RhdGlvbkxheWVyc1xuICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgeCA9PlxuICAgICAgICAgICAgICAgIHguYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuSU5URVJWQUwgJiZcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uRGF0YSAmJlxuICAgICAgICAgICAgICAgIGFubm90YXRpb25EYXRhW3gubmFtZV0sXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuZm9yRWFjaCgoY29uZmlnLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBlID0gYXBwbHlOYXRpdmVDb2x1bW5zKGNvbmZpZyk7XG4gICAgICAgICAgICAgIC8vIEFkZCBpbnRlcnZhbCBhbm5vdGF0aW9uIGxheWVyXG4gICAgICAgICAgICAgIGNvbnN0IGFubm90YXRpb25zID0gZDNcbiAgICAgICAgICAgICAgICAuc2VsZWN0KGVsZW1lbnQpXG4gICAgICAgICAgICAgICAgLnNlbGVjdCgnLm52LXdyYXAnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIGBudi1pbnRlcnZhbC1hbm5vdGF0aW9uLWxheWVyLSR7aW5kZXh9YCk7XG5cbiAgICAgICAgICAgICAgY29uc3QgYUNvbG9yID0gZS5jb2xvciB8fCBnZXRDb2xvcihjbGVhbkNvbG9ySW5wdXQoZS5uYW1lKSwgY29sb3JTY2hlbWUpO1xuICAgICAgICAgICAgICBjb25zdCB0aXAgPSB0aXBGYWN0b3J5KGUpO1xuXG4gICAgICAgICAgICAgIGNvbnN0IHJlY29yZHMgPSAoYW5ub3RhdGlvbkRhdGFbZS5uYW1lXS5yZWNvcmRzIHx8IFtdKVxuICAgICAgICAgICAgICAgIC5tYXAociA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0aW1lVmFsdWUgPSBuZXcgRGF0ZShtb21lbnQudXRjKHJbZS50aW1lQ29sdW1uXSkpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWxFbmRWYWx1ZSA9IG5ldyBEYXRlKG1vbWVudC51dGMocltlLmludGVydmFsRW5kQ29sdW1uXSkpO1xuXG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgICAgICAgICBbZS50aW1lQ29sdW1uXTogdGltZVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBbZS5pbnRlcnZhbEVuZENvbHVtbl06IGludGVydmFsRW5kVmFsdWUsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgIHJlY29yZCA9PlxuICAgICAgICAgICAgICAgICAgICAhTnVtYmVyLmlzTmFOKHJlY29yZFtlLnRpbWVDb2x1bW5dLmdldE1pbGxpc2Vjb25kcygpKSAmJlxuICAgICAgICAgICAgICAgICAgICAhTnVtYmVyLmlzTmFOKHJlY29yZFtlLmludGVydmFsRW5kQ29sdW1uXS5nZXRNaWxsaXNlY29uZHMoKSksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICBpZiAocmVjb3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbnNcbiAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgICAgICAgICAgICAgLmRhdGEocmVjb3JkcylcbiAgICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgICAgICAgIC5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgeDogZCA9PlxuICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKFxuICAgICAgICAgICAgICAgICAgICAgICAgeFNjYWxlKG5ldyBEYXRlKGRbZS50aW1lQ29sdW1uXSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgeFNjYWxlKG5ldyBEYXRlKGRbZS5pbnRlcnZhbEVuZENvbHVtbl0pKSxcbiAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZCA9PlxuICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHhTY2FsZShuZXcgRGF0ZShkW2UuaW50ZXJ2YWxFbmRDb2x1bW5dKSkgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhTY2FsZShuZXcgRGF0ZShkW2UudGltZUNvbHVtbl0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogYW5ub3RhdGlvbkhlaWdodCxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCBgJHtlLm9wYWNpdHl9ICR7ZS5zdHlsZX1gKVxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBlLndpZHRoKVxuICAgICAgICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBhQ29sb3IpXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBhQ29sb3IpXG4gICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIDAuMilcbiAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgdGlwLnNob3cpXG4gICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgdGlwLmhpZGUpXG4gICAgICAgICAgICAgICAgICAuY2FsbCh0aXApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gdXBkYXRlIGFubm90YXRpb24gcG9zaXRpb25zIG9uIGJydXNoIGV2ZW50XG4gICAgICAgICAgICAgIGlmIChjaGFydC5mb2N1cykge1xuICAgICAgICAgICAgICAgIGNoYXJ0LmZvY3VzLmRpc3BhdGNoLm9uKCdvbkJydXNoLmludGVydmFsLWFubm90YXRpb24nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uc1xuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEocmVjb3JkcylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoe1xuICAgICAgICAgICAgICAgICAgICAgIHg6IGQgPT4geFNjYWxlKG5ldyBEYXRlKGRbZS50aW1lQ29sdW1uXSkpLFxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHgxID0geFNjYWxlKG5ldyBEYXRlKGRbZS50aW1lQ29sdW1uXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeDIgPSB4U2NhbGUobmV3IERhdGUoZFtlLmludGVydmFsRW5kQ29sdW1uXSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geDIgLSB4MTtcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXJlbmRlciBjaGFydCBhcHBlbmRlZCB3aXRoIGFubm90YXRpb24gbGF5ZXJcbiAgICAgICAgc3ZnLmRhdHVtKGRhdGEpLmF0dHIoJ2hlaWdodCcsIGhlaWdodCkuYXR0cignd2lkdGgnLCB3aWR0aCkuY2FsbChjaGFydCk7XG5cbiAgICAgICAgLy8gRGlzcGxheSBzdHlsZXMgZm9yIFRpbWUgU2VyaWVzIEFubm90YXRpb25zXG4gICAgICAgIGNoYXJ0LmRpc3BhdGNoLm9uKCdyZW5kZXJFbmQudGltZXNlcmllcy1hbm5vdGF0aW9uJywgKCkgPT4ge1xuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLnNsaWNlX2NvbnRhaW5lciAubnYtdGltZXNlcmllcy1hbm5vdGF0aW9uLWxheWVyLnNob3dNYXJrZXJzdHJ1ZSAubnYtcG9pbnQnKVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2Utb3BhY2l0eScsIDEpXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIDEpO1xuICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLnNsaWNlX2NvbnRhaW5lciAubnYtdGltZXNlcmllcy1hbm5vdGF0aW9uLWxheWVyLmhpZGVMaW5ldHJ1ZScpLnN0eWxlKFxuICAgICAgICAgICAgJ3N0cm9rZS13aWR0aCcsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHdyYXBUb29sdGlwKGNoYXJ0KTtcblxuICAgIHJldHVybiBjaGFydDtcbiAgfTtcblxuICAvLyBSZW1vdmUgdG9vbHRpcHMgYmVmb3JlIHJlbmRlcmluZyBjaGFydCwgaWYgdGhlIGNoYXJ0IGlzIGJlaW5nIHJlLXJlbmRlcmVkIHNvbWV0aW1lc1xuICAvLyB0aGVyZSBhcmUgbGVmdCBvdmVyIHRvb2x0aXBzIGluIHRoZSBkb20sXG4gIC8vIHRoaXMgd2lsbCBjbGVhciB0aGVtIGJlZm9yZSByZW5kZXJpbmcgdGhlIGNoYXJ0IGFnYWluLlxuICBpZiAoY2hhcnRJZCkge1xuICAgIHJlbW92ZVRvb2x0aXAoY2hhcnRJZCk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZVRvb2x0aXBzKHRydWUpO1xuICB9XG5cbiAgbnYuYWRkR3JhcGgoZHJhd0dyYXBoKTtcbn1cblxubnZkM1Zpcy5kaXNwbGF5TmFtZSA9ICdOVkQzJztcbm52ZDNWaXMucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuZXhwb3J0IGRlZmF1bHQgbnZkM1ZpcztcbiIsIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZWFjdGlmeSwgc3R5bGVkIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9OVkQzVmlzJztcbmltcG9ydCB7IGhpZGVUb29sdGlwcywgcmVtb3ZlVG9vbHRpcCB9IGZyb20gJy4vdXRpbHMnO1xuXG5mdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wcztcbiAgaWYgKGlkICE9PSBudWxsICYmIGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICByZW1vdmVUb29sdGlwKGlkKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlVG9vbHRpcHModHJ1ZSk7XG4gIH1cbn1cblxuY29uc3QgUmVhY3ROVkQzID0gcmVhY3RpZnkoQ29tcG9uZW50LCB7IGNvbXBvbmVudFdpbGxVbm1vdW50IH0pO1xuXG5jb25zdCBOVkQzID0gKHsgY2xhc3NOYW1lLCAuLi5vdGhlclByb3BzIH0pID0+IChcbiAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgPFJlYWN0TlZEMyB7Li4ub3RoZXJQcm9wc30gLz5cbiAgPC9kaXY+XG4pO1xuXG5OVkQzLnByb3BUeXBlcyA9IHtcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBzdHlsZWQoTlZEMylgXG4gIC5zdXBlcnNldC1sZWdhY3ktY2hhcnQtbnZkMy1kaXN0LWJhciwgLnN1cGVyc2V0LWxlZ2FjeS1jaGFydC1udmQzLWJhciB7XG4gICAgb3ZlcmZsb3cteDogYXV0byAhaW1wb3J0YW50O1xuICAgIHN2ZyB7XG4gICAgICAmLm52ZDMtc3ZnIHtcbiAgICAgICAgd2lkdGg6IGF1dG87XG4gICAgICAgIGZvbnQtc2l6ZTogJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS50eXBvZ3JhcGh5LnNpemVzLm19O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAuc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LW52ZDMge1xuICAgIG52LXggdGV4dCB7XG4gICAgICBmb250LXNpemU6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUudHlwb2dyYXBoeS5zaXplcy5tfTtcbiAgICB9XG4gICAgZy5zdXBlcnNldCBwYXRoIHtcbiAgICAgIHN0cm9rZS1kYXNoYXJyYXk6IDUsIDU7XG4gICAgfVxuICAgIC5udnRvb2x0aXAgdHIuaGlnaGxpZ2h0IHRkIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgICAgIGZvbnQtc2l6ZTogMTVweCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICB0ZXh0Lm52LWF4aXNsYWJlbCB7XG4gICAgICBmb250LXNpemU6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUudHlwb2dyYXBoeS5zaXplcy5tfSAhaW1wb3J0YW50O1xuICAgIH1cbiAgICBnLnNvbGlkIHBhdGgsXG4gICAgbGluZS5zb2xpZCB7XG4gICAgICBzdHJva2UtZGFzaGFycmF5OiB1bnNldDtcbiAgICB9XG4gICAgZy5kYXNoZWQgcGF0aCxcbiAgICBsaW5lLmRhc2hlZCB7XG4gICAgICBzdHJva2UtZGFzaGFycmF5OiA1LCA1O1xuICAgIH1cbiAgICBnLmxvbmdEYXNoZWQgcGF0aCxcbiAgICBsaW5lLmRvdHRlZCB7XG4gICAgICBzdHJva2UtZGFzaGFycmF5OiAxLCAxO1xuICAgIH1cblxuICAgIGcub3BhY2l0eUxvdyBwYXRoLFxuICAgIGxpbmUub3BhY2l0eUxvdyB7XG4gICAgICBzdHJva2Utb3BhY2l0eTogMC4yO1xuICAgIH1cblxuICAgIGcub3BhY2l0eU1lZGl1bSBwYXRoLFxuICAgIGxpbmUub3BhY2l0eU1lZGl1bSB7XG4gICAgICBzdHJva2Utb3BhY2l0eTogMC41O1xuICAgIH1cbiAgICBnLm9wYWNpdHlIaWdoIHBhdGgsXG4gICAgbGluZS5vcGFjaXR5SGlnaCB7XG4gICAgICBzdHJva2Utb3BhY2l0eTogMC44O1xuICAgIH1cbiAgICBnLnRpbWUtc2hpZnQtMCBwYXRoLFxuICAgIGxpbmUudGltZS1zaGlmdC0wIHtcbiAgICAgIHN0cm9rZS1kYXNoYXJyYXk6IDUsIDU7XG4gICAgfVxuICAgIGcudGltZS1zaGlmdC0xIHBhdGgsXG4gICAgbGluZS50aW1lLXNoaWZ0LTEge1xuICAgICAgc3Ryb2tlLWRhc2hhcnJheTogMSwgNTtcbiAgICB9XG4gICAgZy50aW1lLXNoaWZ0LTIgcGF0aCxcbiAgICBsaW5lLnRpbWUtc2hpZnQtMyB7XG4gICAgICBzdHJva2UtZGFzaGFycmF5OiA1LCAxO1xuICAgIH1cbiAgICBnLnRpbWUtc2hpZnQtMyBwYXRoLFxuICAgIGxpbmUudGltZS1zaGlmdC0zIHtcbiAgICAgIHN0cm9rZS1kYXNoYXJyYXk6IDUsIDE7XG4gICAgfVxuICAgIGcudGltZS1zaGlmdC00IHBhdGgsXG4gICAgbGluZS50aW1lLXNoaWZ0LTQge1xuICAgICAgc3Ryb2tlLWRhc2hhcnJheTogNSwgMTA7XG4gICAgfVxuICAgIGcudGltZS1zaGlmdC01IHBhdGgsXG4gICAgbGluZS50aW1lLXNoaWZ0LTUge1xuICAgICAgc3Ryb2tlLWRhc2hhcnJheTogMC45O1xuICAgIH1cbiAgICBnLnRpbWUtc2hpZnQtNiBwYXRoLFxuICAgIGxpbmUudGltZS1zaGlmdC02IHtcbiAgICAgIHN0cm9rZS1kYXNoYXJyYXk6IDE1LCAxMCwgNTtcbiAgICB9XG4gICAgZy50aW1lLXNoaWZ0LTcgcGF0aCxcbiAgICBsaW5lLnRpbWUtc2hpZnQtNyB7XG4gICAgICBzdHJva2UtZGFzaGFycmF5OiAxNSwgMTAsIDUsIDEwO1xuICAgIH1cbiAgICBnLnRpbWUtc2hpZnQtOCBwYXRoLFxuICAgIGxpbmUudGltZS1zaGlmdC04IHtcbiAgICAgIHN0cm9rZS1kYXNoYXJyYXk6IDE1LCAxMCwgNSwgMTAsIDE1O1xuICAgIH1cbiAgICBnLnRpbWUtc2hpZnQtOSBwYXRoLFxuICAgIGxpbmUudGltZS1zaGlmdC05IHtcbiAgICAgIHN0cm9rZS1kYXNoYXJyYXk6IDUsIDUsIDEsIDU7XG4gICAgfVxuICAgIC5udi1ub0RhdGEuYm9keSB7XG4gICAgICBmb250LXNpemU6ICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUudHlwb2dyYXBoeS5zaXplcy5tfTtcbiAgICAgIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ub3JtYWx9O1xuICAgIH1cbiAgfVxuICAuc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LW52ZDMtdHItaGlnaGxpZ2h0IHtcbiAgICBib3JkZXItdG9wOiAxcHggc29saWQ7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkO1xuICAgIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgfVxuICAuc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LW52ZDMtdHItdG90YWwge1xuICAgIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgfVxuICAubnZ0b29sdGlwIHtcbiAgICAudG9vbHRpcC1oZWFkZXIge1xuICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIGZvbnQtd2VpZ2h0OiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgICB9XG4gICAgdGJvZHkgdHI6bm90KC50b29sdGlwLWhlYWRlcikgdGQ6bnRoLWNoaWxkKDIpIHtcbiAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgfVxuICB9XG4gIC5kMy10aXAubnYtZXZlbnQtYW5ub3RhdGlvbi1sYXllci10YWJsZSxcbiAgLmQzLXRpcC5udi1ldmVudC1hbm5vdGF0aW9uLWxheWVyLU5BVElWRSB7XG4gICAgd2lkdGg6IDIwMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDg0ODQ4O1xuICAgIGZpbGwtb3BhY2l0eTogMC42O1xuICAgIG1hcmdpbjogOHB4O1xuICAgIHBhZGRpbmc6IDhweDtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICAmOmFmdGVyIHtcbiAgICAgIGNvbnRlbnQ6ICdcXDI1QkMnO1xuICAgICAgZm9udC1zaXplOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLnR5cG9ncmFwaHkuc2l6ZXMubX07XG4gICAgICBjb2xvcjogIzQ4NDg0ODtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGJvdHRvbTogLTE0cHg7XG4gICAgICBsZWZ0OiA5NHB4O1xuICAgIH1cbiAgfVxuYDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE4REE7QUFDQTtBQVNBO0FBNkNBO0FBRUE7QUFLQTtBQUtBO0FBUUE7QUFLQTtBQU9BO0FBMENBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBRUE7QUFZQTtBQUVBO0FBTUE7QUFNQTtBQUFBO0FBd0hBO0FBMkNBO0FBd0JBO0FBT0E7QUFTQTtBQVVBO0FBOENBO0FBZ0JBO0FBc0RBO0FBNkJBO0FBQ0E7QUFnQkE7QUFnQ0E7QUEwQkE7QUFZQTtBQU1BO0FBWUE7QUFDQTtBQU9BO0FBQ0E7QUFHQTtBQUlBO0FBR0E7QUFDQTtBQUVBO0FBZUE7QUFLQTtBQStCQTtBQUNBO0FBT0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBWUE7QUFJQTtBQTZCQTtBQUNBO0FBWUE7QUE0QkE7QUFDQTtBQVdBO0FBVUE7QUFDQTtBQU1BO0FBRUE7QUE4QkE7QUFDQTtBQVNBO0FBQ0E7QUFLQTtBQXdCQTtBQWdDQTtBQXFCQTtBQXFCQTtBQW9DQTtBQWtDQTtBQW9CQTtBQUdBO0FBa0JBO0FBQ0E7QUFDQTs7QUMxcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2409\n')}}]);