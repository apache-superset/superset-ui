(window.webpackJsonp=window.webpackJsonp||[]).push([[6,9],{1031:function(module,exports,__webpack_require__){var dispatch=__webpack_require__(1038).dispatch,cloudRadians=Math.PI/180;function cloudText(d){return d.text}function cloudFont(){return"serif"}function cloudFontNormal(){return"normal"}function cloudFontSize(d){return Math.sqrt(d.value)}function cloudRotate(){return 30*(~~(6*Math.random())-3)}function cloudPadding(){return 1}function cloudSprite(contextAndRatio,d,data,di){if(!d.sprite){var c=contextAndRatio.context,ratio=contextAndRatio.ratio;c.clearRect(0,0,2048/ratio,2048/ratio);var x=0,y=0,maxh=0,n=data.length;for(--di;++di<n;){d=data[di],c.save(),c.font=d.style+" "+d.weight+" "+~~((d.size+1)/ratio)+"px "+d.font;var w=c.measureText(d.text+"m").width*ratio,h=d.size<<1;if(d.rotate){var sr=Math.sin(d.rotate*cloudRadians),cr=Math.cos(d.rotate*cloudRadians),wcr=w*cr,wsr=w*sr,hcr=h*cr,hsr=h*sr;w=Math.max(Math.abs(wcr+hsr),Math.abs(wcr-hsr))+31>>5<<5,h=~~Math.max(Math.abs(wsr+hcr),Math.abs(wsr-hcr))}else w=w+31>>5<<5;if(h>maxh&&(maxh=h),x+w>=2048&&(x=0,y+=maxh,maxh=0),y+h>=2048)break;c.translate((x+(w>>1))/ratio,(y+(h>>1))/ratio),d.rotate&&c.rotate(d.rotate*cloudRadians),c.fillText(d.text,0,0),d.padding&&(c.lineWidth=2*d.padding,c.strokeText(d.text,0,0)),c.restore(),d.width=w,d.height=h,d.xoff=x,d.yoff=y,d.x1=w>>1,d.y1=h>>1,d.x0=-d.x1,d.y0=-d.y1,d.hasText=!0,x+=w}for(var pixels=c.getImageData(0,0,2048/ratio,2048/ratio).data,sprite=[];--di>=0;)if((d=data[di]).hasText){for(var w32=(w=d.width)>>5,i=(h=d.y1-d.y0,0);i<h*w32;i++)sprite[i]=0;if(null==(x=d.xoff))return;y=d.yoff;for(var seen=0,seenRow=-1,j=0;j<h;j++){for(i=0;i<w;i++){var k=w32*j+(i>>5),m=pixels[2048*(y+j)+(x+i)<<2]?1<<31-i%32:0;sprite[k]|=m,seen|=m}seen?seenRow=j:(d.y0++,h--,j--,y++)}d.y1=d.y0+seenRow,d.sprite=sprite.slice(0,(d.y1-d.y0)*w32)}}}function cloudCollide(tag,board,sw){sw>>=5;for(var last,sprite=tag.sprite,w=tag.width>>5,lx=tag.x-(w<<4),sx=127&lx,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),j=0;j<h;j++){last=0;for(var i=0;i<=w;i++)if((last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0))&board[x+i])return!0;x+=sw}return!1}function cloudBounds(bounds,d){var b0=bounds[0],b1=bounds[1];d.x+d.x0<b0.x&&(b0.x=d.x+d.x0),d.y+d.y0<b0.y&&(b0.y=d.y+d.y0),d.x+d.x1>b1.x&&(b1.x=d.x+d.x1),d.y+d.y1>b1.y&&(b1.y=d.y+d.y1)}function archimedeanSpiral(size){var e=size[0]/size[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function cloudCanvas(){return document.createElement("canvas")}function functor(d){return"function"==typeof d?d:function(){return d}}module.exports=function(){var size=[256,256],text=cloudText,font=cloudFont,fontSize=cloudFontSize,fontStyle=cloudFontNormal,fontWeight=cloudFontNormal,rotate=cloudRotate,padding=cloudPadding,spiral=archimedeanSpiral,words=[],timeInterval=1/0,event=dispatch("word","end"),timer=null,random=Math.random,cloud={},canvas=cloudCanvas;function place(board,tag,bounds){size[0],size[1];for(var dxdy,dx,dy,a,b,startX=tag.x,startY=tag.y,maxDelta=Math.sqrt(size[0]*size[0]+size[1]*size[1]),s=spiral(size),dt=random()<.5?1:-1,t=-dt;(dxdy=s(t+=dt))&&(dx=~~dxdy[0],dy=~~dxdy[1],!(Math.min(Math.abs(dx),Math.abs(dy))>=maxDelta));)if(tag.x=startX+dx,tag.y=startY+dy,!(tag.x+tag.x0<0||tag.y+tag.y0<0||tag.x+tag.x1>size[0]||tag.y+tag.y1>size[1]||bounds&&cloudCollide(tag,board,size[0])||bounds&&(b=bounds,!((a=tag).x+a.x1>b[0].x&&a.x+a.x0<b[1].x&&a.y+a.y1>b[0].y&&a.y+a.y0<b[1].y)))){for(var last,sprite=tag.sprite,w=tag.width>>5,sw=size[0]>>5,lx=tag.x-(w<<4),sx=127&lx,msx=32-sx,h=tag.y1-tag.y0,x=(tag.y+tag.y0)*sw+(lx>>5),j=0;j<h;j++){last=0;for(var i=0;i<=w;i++)board[x+i]|=last<<msx|(i<w?(last=sprite[j*w+i])>>>sx:0);x+=sw}return delete tag.sprite,!0}return!1}return cloud.canvas=function(_){return arguments.length?(canvas=functor(_),cloud):canvas},cloud.start=function(){var contextAndRatio=function getContext(canvas){canvas.width=canvas.height=1;var ratio=Math.sqrt(canvas.getContext("2d").getImageData(0,0,1,1).data.length>>2);canvas.width=2048/ratio,canvas.height=2048/ratio;var context=canvas.getContext("2d");return context.fillStyle=context.strokeStyle="red",context.textAlign="center",{context:context,ratio:ratio}}(canvas()),board=function zeroArray(n){var a=[],i=-1;for(;++i<n;)a[i]=0;return a}((size[0]>>5)*size[1]),bounds=null,n=words.length,i=-1,tags=[],data=words.map((function(d,i){return d.text=text.call(this,d,i),d.font=font.call(this,d,i),d.style=fontStyle.call(this,d,i),d.weight=fontWeight.call(this,d,i),d.rotate=rotate.call(this,d,i),d.size=~~fontSize.call(this,d,i),d.padding=padding.call(this,d,i),d})).sort((function(a,b){return b.size-a.size}));return timer&&clearInterval(timer),timer=setInterval(step,0),step(),cloud;function step(){for(var start=Date.now();Date.now()-start<timeInterval&&++i<n&&timer;){var d=data[i];d.x=size[0]*(random()+.5)>>1,d.y=size[1]*(random()+.5)>>1,cloudSprite(contextAndRatio,d,data,i),d.hasText&&place(board,d,bounds)&&(tags.push(d),event.call("word",cloud,d),bounds?cloudBounds(bounds,d):bounds=[{x:d.x+d.x0,y:d.y+d.y0},{x:d.x+d.x1,y:d.y+d.y1}],d.x-=size[0]>>1,d.y-=size[1]>>1)}i>=n&&(cloud.stop(),event.call("end",cloud,tags,bounds))}},cloud.stop=function(){return timer&&(clearInterval(timer),timer=null),cloud},cloud.timeInterval=function(_){return arguments.length?(timeInterval=null==_?1/0:_,cloud):timeInterval},cloud.words=function(_){return arguments.length?(words=_,cloud):words},cloud.size=function(_){return arguments.length?(size=[+_[0],+_[1]],cloud):size},cloud.font=function(_){return arguments.length?(font=functor(_),cloud):font},cloud.fontStyle=function(_){return arguments.length?(fontStyle=functor(_),cloud):fontStyle},cloud.fontWeight=function(_){return arguments.length?(fontWeight=functor(_),cloud):fontWeight},cloud.rotate=function(_){return arguments.length?(rotate=functor(_),cloud):rotate},cloud.text=function(_){return arguments.length?(text=functor(_),cloud):text},cloud.spiral=function(_){return arguments.length?(spiral=spirals[_]||_,cloud):spiral},cloud.fontSize=function(_){return arguments.length?(fontSize=functor(_),cloud):fontSize},cloud.padding=function(_){return arguments.length?(padding=functor(_),cloud):padding},cloud.random=function(_){return arguments.length?(random=_,cloud):random},cloud.on=function(){var value=event.on.apply(event,arguments);return value===event?cloud:value},cloud};var spirals={archimedean:archimedeanSpiral,rectangular:function rectangularSpiral(size){var dx=4*size[0]/size[1],x=0,y=0;return function(t){var sign=t<0?-1:1;switch(Math.sqrt(1+4*sign*t)-sign&3){case 0:x+=dx;break;case 1:y+=4;break;case 2:x-=dx;break;default:y-=4}return[x,y]}}}},1038:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var noop={value:function(){}};function dispatch(){for(var t,i=0,n=arguments.length,_={};i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map((function(t){var name="",i=t.indexOf(".");if(i>=0&&(name=t.slice(i+1),t=t.slice(0,i)),t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}}))}function get(type,name){for(var c,i=0,n=type.length;i<n;++i)if((c=type[i]).name===name)return c.value}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i)if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}return null!=callback&&type.push({name:name,value:callback}),type}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var t,_=this._,T=parseTypenames(typename+"",_),i=-1,n=T.length;if(!(arguments.length<2)){if(null!=callback&&"function"!=typeof callback)throw new Error("invalid callback: "+callback);for(;++i<n;)if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(null==callback)for(t in _)_[t]=set(_[t],typename.name,null);return this}for(;++i<n;)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var n,t,args=new Array(n),i=0;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(i=0,n=(t=this._[type]).length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};var src_dispatch=dispatch;__webpack_require__.d(__webpack_exports__,"dispatch",(function(){return src_dispatch}))},1039:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return reactify}));var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),prop_types__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_1___default.a.Component{constructor(props){super(props),_defineProperty(this,"container",void 0),this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,(null==callbacks?void 0:callbacks.componentWillUnmount)&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(ref){this.container=ref}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:id,className:className}=this.props;return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{ref:this.setContainerRef,id:id,className:className})}}_defineProperty(ReactifiedComponent,"propTypes",{id:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.string,className:prop_types__WEBPACK_IMPORTED_MODULE_0___default.a.string});const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes=_extends({},ReactifiedClass.propTypes,{},renderFn.propTypes)),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}},1112:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var reactify=__webpack_require__(1039),d3=__webpack_require__(1024),d3_default=__webpack_require__.n(d3),prop_types=__webpack_require__(0),prop_types_default=__webpack_require__.n(prop_types),d3_cloud=__webpack_require__(1031),d3_cloud_default=__webpack_require__.n(d3_cloud),esm=__webpack_require__(320);const ROTATION={square:()=>90*Math.floor(2*Math.random()),flat:()=>0,random:()=>30*Math.floor(6*Math.random()-3)},propTypes={data:prop_types_default.a.arrayOf(prop_types_default.a.shape({size:prop_types_default.a.number,text:prop_types_default.a.string})),width:prop_types_default.a.number,height:prop_types_default.a.number,rotation:prop_types_default.a.string,sizeRange:prop_types_default.a.arrayOf(prop_types_default.a.number),colorScheme:prop_types_default.a.string};function WordCloud(element,props){const{data:data,width:width,height:height,rotation:rotation,sizeRange:sizeRange,colorScheme:colorScheme}=props,chart=d3_default.a.select(element);chart.classed("superset-legacy-chart-word-cloud",!0);const size=[width,height],rotationFn=ROTATION[rotation]||ROTATION.flat,scale=d3_default.a.scale.linear().range(sizeRange).domain(d3_default.a.extent(data,d=>d.size)),layout=d3_cloud_default()().size(size).words(data).padding(5).rotate(rotationFn).font("Helvetica").fontWeight("bold").fontSize(d=>scale(d.size)),colorFn=esm.CategoricalColorNamespace.getScale(colorScheme);layout.on("end",(function draw(words){chart.selectAll("*").remove();const[w,h]=layout.size();chart.append("svg").attr("width",w).attr("height",h).append("g").attr("transform","translate("+w/2+","+h/2+")").selectAll("text").data(words).enter().append("text").style("font-size",d=>d.size+"px").style("font-weight","bold").style("font-family","Helvetica").style("fill",d=>colorFn(d.text)).attr("text-anchor","middle").attr("transform",d=>"translate("+d.x+", "+d.y+") rotate("+d.rotate+")").text(d=>d.text)})).start()}WordCloud.displayName="WordCloud",WordCloud.propTypes=propTypes;var esm_WordCloud=WordCloud;__webpack_exports__.default=Object(reactify.a)(esm_WordCloud)}}]);
//# sourceMappingURL=6.7ce688efbdcdc75f9a78.bundle.js.map